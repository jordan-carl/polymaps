if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function J(){for(var f=0;f<J.maps.length;f++)J.maps[f].resize()}function P(f){return 360/Math.PI*Math.atan(Math.exp(f*Math.PI/180))-90}function Q(f){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360))}function U(f,a){if(f.row>a.row){var g=f;f=a;a=g}return{x0:f.column,y0:f.row,x1:a.column,y1:a.row,dx:a.column-f.column,dy:a.row-f.row}}function X(f,a,g,d,c){g=Math.max(g,Math.floor(a.y0));d=Math.min(d,Math.ceil(a.y1));if(f.x0<a.x0||f.x1<a.x1){var h=f;f=a;a=h}h=f.dx/f.dy;var i=
a.dx/a.dy,o=f.dx>0,j=a.dx<0;for(g=g;g<d;g++){var r=h*Math.max(0,Math.min(f.dy,g+o-f.y0))+f.x0;c(Math.floor(i*Math.max(0,Math.min(a.dy,g+j-a.y0))+a.x0),Math.ceil(r),g)}}function Y(f,a,g,d,c,h){var i=U(f,a);a=U(a,g);f=U(g,f);if(i.dy>a.dy){g=i;i=a;a=g}if(i.dy>f.dy){g=i;i=f;f=g}if(a.dy>f.dy){g=a;a=f;f=g}i.dy&&X(f,i,d,c,h);a.dy&&X(f,a,d,c,h)}s.version="2.0.1";var R={x:0,y:0};s.id=function(){var f=0;return function(){return++f}}();s.svg=function(f){return document.createElementNS(s.ns.svg,f)};s.ns={svg:"http://www.w3.org/2000/svg",
xlink:"http://www.w3.org/1999/xlink"};s.transform=function(f,a,g,d,c,h){var i={},o,j,r;if(!arguments.length){f=1;a=c=g=0;d=1;h=0}i.zoomFraction=function(k){if(!arguments.length)return j;j=k;o=Math.floor(j+Math.log(Math.sqrt(f*f+a*a+g*g+d*d))/Math.log(2));r=Math.pow(2,-o);return i};i.apply=function(k){var l=Math.pow(2,-k.zoom),e=Math.pow(2,k.zoom-o);return{column:(f*k.column*l+g*k.row*l+c)*e,row:(a*k.column*l+d*k.row*l+h)*e,zoom:k.zoom-o}};i.unapply=function(k){var l=Math.pow(2,-k.zoom),e=Math.pow(2,
k.zoom+o);return{column:(k.column*l*d-k.row*l*g-c*d+h*g)/(f*d-a*g)*e,row:(k.column*l*a-k.row*l*f-c*a+h*f)/(g*a-d*f)*e,zoom:k.zoom+o}};i.toString=function(){return"matrix("+[f*r,a*r,g*r,d*r].join(" ")+" 0 0)"};return i.zoomFraction(0)};s.cache=function(f,a){function g(l){k--;a&&a(l);delete i[l.key];if(l.next)l.next.prev=l.prev;else if(j=l.prev)j.next=null;if(l.prev)l.prev.next=l.next;else if(o=l.next)o.prev=null}function d(){for(var l=j;k>r;l=l.prev){if(!l)break;l.lock||g(l)}}var c={},h={},i={},o=
null,j=null,r=64,k=0;c.peek=function(l){return i[[l.zoom,l.column,l.row].join("/")]};c.load=function(l,e){var q=[l.zoom,l.column,l.row].join("/"),t=i[q];if(t){if(t.prev){if(t.prev.next=t.next)t.next.prev=t.prev;else j=t.prev;t.prev=null;t.next=o;o=o.prev=t}t.lock=1;return h[q]=t}t={key:q,column:l.column,row:l.row,zoom:l.zoom,next:o,prev:null,lock:1};f.call(null,t,e);h[q]=i[q]=t;if(o)o.prev=t;else j=t;o=t;k++;d();return t};c.unload=function(l){if(!(l in h))return false;var e=h[l];e.lock=0;delete h[l];
e.request&&e.request.abort(false)?g(e):d();return e};c.locks=function(){return h};c.size=function(l){if(!arguments.length)return r;r=l;d();return c};return c};s.url=function(f){function a(d){var c=1<<d.zoom,h=d.column%c;if(h<0)h+=c;return f.replace(/{(.)}/g,function(i,o){switch(o){case "S":return g[(d.zoom+d.row+h)%g.length];case "Z":return d.zoom;case "X":return h;case "Y":return d.row;case "B":var j=s.map.coordinateLocation({row:d.row,column:h,zoom:d.zoom}),r=s.map.coordinateLocation({row:d.row+
1,column:h+1,zoom:d.zoom}),k=Math.ceil(Math.log(d.zoom)/Math.LN2);return r.lat.toFixed(k)+","+j.lon.toFixed(k)+","+j.lat.toFixed(k)+","+r.lon.toFixed(k)}return o})}var g=[];a.template=function(d){if(!arguments.length)return f;f=d;return a};a.hosts=function(d){if(!arguments.length)return g;g=d;return a};return a};s.dispatch=function(f){var a={};f.on=function(g,d){for(var c=a[g]||(a[g]=[]),h=0;h<c.length;h++)if(c[h].handler==d)return f;c.push({handler:d,on:true});return f};f.off=function(g,d){var c=
a[g];if(c)for(var h=0;h<c.length;h++){var i=c[h];if(i.handler==d){i.on=false;c.splice(h,1);break}}return f};return function(g){var d=a[g.type];if(d){d=d.slice();for(var c=0;c<d.length;c++){var h=d[c];h.on&&h.handler.call(f,g)}}}};s.queue=function(){function f(){if(!(c>=h||!d.length)){c++;d.pop()()}}function a(i){for(var o=0;o<d.length;o++)if(d[o]==i){d.splice(o,1);return true}return false}function g(i,o,j){function r(){k=new XMLHttpRequest;j&&k.overrideMimeType(j);k.open("GET",i,true);k.onreadystatechange=
function(){if(k.readyState==4){c--;k.status<300&&o(k);f()}};k.send(null)}var k;d.push(r);f();return{abort:function(l){if(a(r))return true;if(l&&k){k.abort();return true}return false}}}var d=[],c=0,h=6;return{text:function(i,o,j){return g(i,function(r){r.responseText&&o(r.responseText)},j)},xml:function(i,o){return g(i,function(j){j.responseXML&&o(j.responseXML)},"application/xml")},json:function(i,o){return g(i,function(j){j.responseText&&o(JSON.parse(j.responseText))},"application/json")},image:function(i,
o,j){function r(){k=document.createElement("img");k.onerror=function(){c--;f()};k.onload=function(){c--;j(k);f()};k.src=o;i.setAttributeNS(s.ns.xlink,"href",o)}var k;d.push(r);f();return{abort:function(l){if(a(r))return true;if(l&&k){k.src="about:";return true}return false}}}}}();s.map=function(){function f(){if(G){var m=45/Math.pow(2,j+r-3),u=Math.max(Math.abs(t*h.x+q*h.y),Math.abs(w*h.x+n*h.y)),y=P(B-u*m/i.y);u=P(H+u*m/i.y);o.lat=Math.max(y,Math.min(u,o.lat));y=Math.max(Math.abs(t*h.y+q*h.x),Math.abs(w*
h.y+n*h.x));o.lon=Math.max(G[0].lon-y*m/i.x,Math.min(G[1].lon+y*m/i.x,o.lon))}}var a={},g,d,c=R,h=R,i={x:256,y:256},o={lat:37.76487,lon:-122.41948},j=12,r=0,k=1,l=[1,18],e=0,q=1,t=0,n=1,w=0,B=-180,H=180,G=[{lat:P(B),lon:-Infinity},{lat:P(H),lon:Infinity}];a.locationCoordinate=function(m){m=s.map.locationCoordinate(m);var u=Math.pow(2,j);m.column*=u;m.row*=u;m.zoom+=j;return m};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(m,u){var y=Math.pow(2,j-u.zoom),D=Math.pow(2,j-m.zoom),
E=(u.column*y-m.column*D)*i.x*k;y=(u.row*y-m.row*D)*i.y*k;return{x:h.x+q*E-t*y,y:h.y+t*E+q*y}};a.pointCoordinate=function(m,u){var y=Math.pow(2,j-m.zoom),D=(u.x-h.x)/k,E=(u.y-h.y)/k;return{column:m.column*y+(n*D-w*E)/i.x,row:m.row*y+(w*D+n*E)/i.y,zoom:j}};a.locationPoint=function(m){var u=Math.pow(2,j+r-3)/45,y=(m.lon-o.lon)*u*i.x;m=(Q(o.lat)-Q(m.lat))*u*i.y;return{x:h.x+q*y-t*m,y:h.y+t*y+q*m}};a.pointLocation=function(m){var u=45/Math.pow(2,j+r-3),y=(m.x-h.x)*u;m=(m.y-h.y)*u;return{lon:o.lon+(n*
y-w*m)/i.x,lat:P(Q(o.lat)-(w*y+n*m)/i.y)}};var C=s.svg("rect");C.setAttribute("visibility","hidden");C.setAttribute("pointer-events","all");a.container=function(m){if(!arguments.length)return g;a.dispatch({type:"container",old:g,"new":m});g=m;g.setAttribute("class","map");g.appendChild(C);return a.resize()};a.focusableParent=function(){for(var m=g;m;m=m.parentNode)if(m.tabIndex>=0)return m;return window};a.mouse=function(m){var u=(g.ownerSVGElement||g).createSVGPoint();u.x=m.clientX;u.y=m.clientY;
return u.matrixTransform(g.getScreenCTM().inverse())};a.size=function(m){if(!arguments.length)return c;d=m;return a.resize()};a.resize=function(){if(d){c=d;J.remove(a)}else{var m=g.ownerSVGElement||g;if(m.offsetWidth==null){C.setAttribute("width","100%");C.setAttribute("height","100%");m=C}b=m.getBoundingClientRect();c={x:b.width,y:b.height};J.add(a)}C.setAttribute("width",c.x);C.setAttribute("height",c.y);h={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});return a};a.tileSize=function(m){if(!arguments.length)return i;
i=m;a.dispatch({type:"move"});return a};a.center=function(m){if(!arguments.length)return o;o=m;f();a.dispatch({type:"move"});return a};a.panBy=function(m){var u=45/Math.pow(2,j+r-3),y=m.x*u;m=m.y*u;return a.center({lon:o.lon+(w*m-n*y)/i.x,lat:P(Q(o.lat)+(w*y+n*m)/i.y)})};a.centerRange=function(m){if(!arguments.length)return G;if(G=m){B=G[0].lat>-90?Q(G[0].lat):-Infinity;H=G[0].lat<90?Q(G[1].lat):Infinity}else{B=-Infinity;H=Infinity}f();a.dispatch({type:"move"});return a};a.zoom=function(m){if(!arguments.length)return j+
r;j=Math.max(l[0],Math.min(l[1],m));r=j-(j=Math.round(j));k=Math.pow(2,r);return a.center(o)};a.zoomBy=function(m,u,y){if(arguments.length<2)return a.zoom(j+r+m);if(arguments.length<3)y=a.pointLocation(u);j=Math.max(l[0],Math.min(l[1],j+r+m));r=j-(j=Math.round(j));k=Math.pow(2,r);var D=a.locationPoint(y);return a.panBy({x:u.x-D.x,y:u.y-D.y})};a.zoomRange=function(m){if(!arguments.length)return l;l=m;return a.zoom(j+r)};a.angle=function(m){if(!arguments.length)return e;e=m;q=Math.cos(e);t=Math.sin(e);
n=Math.cos(-e);w=Math.sin(-e);f();a.dispatch({type:"move"});return a};a.add=function(m){m.map(a);return a};a.remove=function(m){m.map(null);return a};a.dispatch=s.dispatch(a);return a};J.maps=[];J.add=function(f){for(var a=0;a<J.maps.length;a++)if(J.maps[a]==f)return;J.maps.push(f)};J.remove=function(f){for(var a=0;a<J.maps.length;a++)if(J.maps[a]==f){J.maps.splice(a,1);return}};window.addEventListener("resize",J,false);s.map.locationCoordinate=function(f){var a=1/360;return{column:(f.lon+180)*a,
row:(180-Q(f.lat))*a,zoom:0}};s.map.coordinateLocation=function(f){var a=45/Math.pow(2,f.zoom-3);return{lon:a*f.column-180,lat:P(180-a*f.row)}};s.layer=function(f,a){function g(){function q(z){var A=z.zoom,F=1<<A,I=z.column%F,N=z.row;if(I<0)I+=F;return{locationPoint:function(M){M=s.map.locationCoordinate(M);var O=Math.pow(2,A-M.zoom);return{x:C.x*(O*M.column-I),y:C.y*(O*M.row-N)}}}}function t(z,A,F){var I=y.zoom,N=2-E,M=4+E;for(z=z;z<A;z++){var O=c.load({column:z,row:F,zoom:I},q);if(!O.ready&&!(O.key in
x)){O.proxyRefs={};for(var S,T,K,L=1;L<=N;L++){T=true;for(var V=0,Z=1<<L;V<=Z;V++)for(var W=0;W<=Z;W++)if((K=c.peek(S={column:(z<<L)+W,row:(F<<L)+V,zoom:I+L}))&&K.ready){x[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K}else T=false;if(T)break}if(!T)for(L=1;L<=M;L++)if((K=c.peek(S={column:z>>L,row:F>>L,zoom:I-L}))&&K.ready){x[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K;break}}x[O.key]=O}}var n=d.map(),w=n.zoom(),B=w-(w=Math.round(w)),H=n.size(),G=n.angle(),C=n.tileSize(),m=n.locationCoordinate(n.center());
i?k.removeAttribute("visibility"):k.setAttribute("visibility","hidden");for(var u=-4;u<=2;u++)e[u].setAttribute("class","zoom"+(u<0?"":"+")+u+" zoom"+(w+u));k.setAttribute("transform","translate("+H.x/2+","+H.y/2+")"+(G?"rotate("+G/Math.PI*180+")":"")+(B?"scale("+Math.pow(2,B)+")":"")+(l?l.zoomFraction(B):""));var y=n.pointCoordinate(m,R);u=n.pointCoordinate(m,{x:H.x,y:0});var D=n.pointCoordinate(m,H);n=n.pointCoordinate(m,{x:0,y:H.y});if(!l&&!G&&!B){m.column=(Math.round(C.x*m.column)+(H.x&1)/2)/
C.x;m.row=(Math.round(C.y*m.row)+(H.y&1)/2)/C.y}var E=o?o(w)-w:0;if(E){B=Math.pow(2,E);y.column*=B;y.row*=B;u.column*=B;u.row*=B;D.column*=B;D.row*=B;n.column*=B;n.row*=B;y.zoom=u.zoom=D.zoom=n.zoom+=E}if(l){y=l.unapply(y);u=l.unapply(u);D=l.unapply(D);n=l.unapply(n);m=l.unapply(m)}w=c.locks();var x={};for(var v in w)w[v].proxyCount=0;if(i&&E>-5&&E<3){B=1<<y.zoom;if(h){Y(y,u,D,0,B,t);Y(D,n,y,0,B,t)}else{D=Math.floor((y.column+D.column)/2);n=Math.max(0,Math.min(B-1,Math.floor((u.row+n.row)/2)));u=
Math.min(4,y.zoom);D=D>>u<<u;n=n>>u<<u;t(D,D+1,n)}}for(v in x){u=x[v];B=Math.pow(2,u.level=u.zoom-m.zoom);D=C.x*(u.column-m.column*B);n=C.y*(u.row-m.row*B);u.element.setAttribute("transform","translate("+D+","+n+")")}for(v in w)if(!(v in x)){u=c.unload(v);u.element.parentNode.removeChild(u.element);delete u.proxyRefs}for(v in x){u=x[v];if(u.element.parentNode!=e[u.level]){e[u.level].appendChild(u.element);d.show&&d.show(u)}}}var d={},c=d.cache=s.cache(f,a).size(512),h=true,i=true,o,j,r,k,l,e;d.map=
function(q){if(!arguments.length)return r;if(r){if(r==q){k.parentNode.appendChild(k);return d}r.off("move",g).off("resize",g);k.parentNode.removeChild(k);k=e=null}if(r=q){k=r.container().appendChild(s.svg("g"));j&&k.setAttribute("id",j);k.setAttribute("class","layer");e={};for(var t=-4;t<=-1;t++)(e[t]=k.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-t)+")");for(t=2;t>=1;t--)(e[t]=k.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-t)+")");e[0]=k.appendChild(s.svg("g"));
d.init&&d.init(k);r.on("move",g).on("resize",g);g()}return d};d.container=function(){return k};d.id=function(q){if(!arguments.length)return j;j=q;return d};d.visible=function(q){if(!arguments.length)return i;i=q;r&&g();return d};d.transform=function(q){if(!arguments.length)return l;l=q;r&&g();return d};d.zoom=function(q){if(!arguments.length)return o;o=typeof q=="function"||q==null?q:function(){return q};return d};d.tile=function(q){if(!arguments.length)return h;h=q;return d};d.dispatch=s.dispatch(d);
d.on("load",function(q){if(q.tile.proxyRefs){for(var t in q.tile.proxyRefs){var n=q.tile.proxyRefs[t];--n.proxyCount<=0&&c.unload(t)&&n.element.parentNode.removeChild(n.element)}delete q.tile.proxyRefs}});return d};s.image=function(){var f=s.layer(function(g){var d=g.element=s.svg("image"),c=f.map().tileSize();d.setAttribute("preserveAspectRatio","none");d.setAttribute("width",c.x);d.setAttribute("height",c.y);d.setAttribute("opacity",0);if(typeof a=="function")g.request=s.queue.image(d,a(g),function(){delete g.request;
g.ready=true;d.removeAttribute("opacity");f.dispatch({type:"load",tile:g})});else{g.ready=true;d.setAttributeNS(s.ns.xlink,"href",a);f.dispatch({type:"load",tile:g})}},function(g){g.request&&g.request.abort(true)}),a="about:blank";f.url=function(g){if(!arguments.length)return a;a=typeof g=="string"&&/{.}/.test(g)?s.url(g):g;return f};return f};s.geoJson=function(f){function a(e,q){var t=q({lat:e[1],lon:e[0]}),n=s.svg("circle");n.setAttribute("r",4.5);n.setAttribute("cx",t.x);n.setAttribute("cy",t.y);
return n}function g(e,q,t,n){n.push("M");for(var w=0;w<e.length-q;w++){p=t({lat:e[w][1],lon:e[w][0]});n.push(p.x);n.push(",");n.push(p.y);n.push("L")}n.pop()}function d(e,q,t,n){for(var w=0;w<e.length;w++)g(e[w],q,t,n);q&&n.push("Z")}function c(e,q,t,n){for(var w=[],B=0;B<q.length;B++)e(q[B],t,n,w);if(w.length){e=s.svg("path");e.setAttribute("d",w.join(""));return e}}var h=s.layer(function(e,q){function t(w){var B=r[e.key]||(r[e.key]=[]),H=[];if(w.next)e.request=f(w.next.href,t);for(var G=0;G<w.features.length;G++){var C=
w.features[G],m=C.geometry&&C.geometry.type in l&&l[C.geometry.type](C.geometry,q.locationPoint);if(m){C={element:n.appendChild(m),data:C};B.push(C);H.push(C)}}e.ready=true;h.dispatch({type:"load",tile:e,features:H})}var n=e.element=s.svg("g");q=q(e);if(k)t({features:k});else e.request=f(i(e),t);j&&n.setAttribute("clip-path","url(#"+j+")")},function(e){e.request&&e.request.abort(true);delete r[e.key]}),i=s.url("about:blank"),o=true,j,r={},k;if(!arguments.length)f=s.queue.json;var l={Point:function(e,
q){return a(e.coordinates,q)},MultiPoint:function(e,q){for(var t=s.svg("g"),n=0;n<e.coordinates.length;n++)t.appendChild(a(e.coordinates[n],q));return t},LineString:function(e,q){return c(g,[e.coordinates],0,q)},MultiLineString:function(e,q){return c(g,e.coordinates,0,q)},Polygon:function(e,q){return c(d,[e.coordinates],1,q)},MultiPolygon:function(e,q){return c(d,e.coordinates||e.coords,1,q)},GeometryCollection:function(e,q){for(var t=s.svg("g"),n=0;n<e.geometries.length;n++){var w=e.geometries[n]&&
e.geometries[n].type in l&&l[e.geometries[n].type](e.geometries[n],q);w&&t.appendChild(w)}return t}};h.url=function(e){if(!arguments.length)return i;i=typeof e=="string"?s.url(e):e;return h};h.features=function(e){if(!arguments.length)return k;e&&h.tile(false);k=e;return h};h.clip=function(e){if(!arguments.length)return o;o=e;return h};h.init=function(e){if(o&&h.tile()){var q=h.map().tileSize(),t=e.insertBefore(s.svg("clipPath"),e.firstChild),n=t.appendChild(s.svg("rect"));t.setAttribute("id",j="org.polymaps."+
s.id());n.setAttribute("width",q.x);n.setAttribute("height",q.y)}e.setAttribute("fill-rule","evenodd")};h.show=function(e){h.dispatch({type:"show",tile:e,features:r[e.key]||[]})};h.reshow=function(){var e=h.cache.locks();for(var q in e)h.show(e[q])};return h};s.dblclick=function(){function f(d){var c=g.zoom();c=d.shiftKey?Math.ceil(c)-c-1:1-c+Math.floor(c);g.zoomBy(c,g.mouse(d))}var a={},g;a.map=function(d){if(!arguments.length)return g;g=d;g.container().addEventListener("dblclick",f,false);return a};
return a};s.drag=function(){function f(i){h={x:i.clientX,y:i.clientY};d.focusableParent().focus();i.preventDefault();c=document.body.style.cursor;document.body.style.cursor="move"}function a(i){if(h){d.panBy({x:i.clientX-h.x,y:i.clientY-h.y});h.x=i.clientX;h.y=i.clientY}}var g={},d,c,h;g.map=function(i){if(!arguments.length)return d;d=i;d.container().addEventListener("mousedown",f,false);return g};window.addEventListener("mousemove",a,false);window.addEventListener("mouseup",function(i){if(h){a(i);
h=null;document.body.style.cursor=c}},false);return g};s.touch=function(){function f(j){if(j.old){j.old.removeEventListener("touchstart",a,false);j.old.removeEventListener("touchmove",g,false);j.old.removeEventListener("touchend",d,false);j.old.removeEventListener("touchcancel",d,false)}if(j["new"]){console.log(j["new"]);j["new"].addEventListener("touchstart",a,false);j["new"].addEventListener("touchmove",g,false);j["new"].addEventListener("touchend",d,false);j["new"].addEventListener("touchcancel",
d,false)}}function a(j){o&&d();j.preventDefault();o=c(j)}function g(j){if(!o)return a(j);j.preventDefault();j=c(j);var r={x:j.clientX-o.clientX,y:j.clientY-o.clientY,scale:j.scale-o.scale};if(r.x||r.y||r.scale){var k=i.mouse(o);k=i.pointLocation(k);i.zoomBy(r.scale,i.mouse(j),k)}o=j}function d(){o=null}function c(j){for(var r=j.touches,k=0,l=0,e=0;e<r.length;++e){var q=r[e];k+=q.clientX;l+=q.clientY}return{clientX:k/r.length,clientY:l/r.length,scale:j.scale}}var h={},i,o;h.map=function(j){if(!arguments.length)return i;
i&&i.off("container",f);f({old:i&&i.container(),"new":j&&j.container()});(i=j)&&i.on("container",f);return h};return h};s.wheel=function(){function f(){i=null}function a(k){var l=Math.max(-1,Math.min(1,(k.wheelDelta/120||-k.detail)*0.1)),e=r.mouse(k);if(o){j=j*0.95+Math.abs(l)*0.05;if(j>0.5)l*=0.4}i||(i=r.pointLocation(e));r.off("move",f);if(h)r.zoomBy(l,e,i);else if(l){var q=Date.now();if(q-c>200){r.zoomBy(l>0?+1:-1,e,i);c=q}}r.on("move",f);k.preventDefault();return false}function g(k){if(k.old){k.old.removeEventListener("mousemove",
f,false);k.old.removeEventListener("mousewheel",a,false);k.old.removeEventListener("DOMMouseScroll",a,false)}if(k["new"]){k["new"].addEventListener("mousemove",f,false);k["new"].addEventListener("mousewheel",a,false);k["new"].addEventListener("DOMMouseScroll",a,false)}}var d={},c=0,h=true,i,o=/WebKit\/533/.test(navigator.userAgent),j=0.3,r;d.smooth=function(k){if(!arguments.length)return h;h=k;return d};d.map=function(k){if(!arguments.length)return r;if(r){r.off("move",f);r.off("container",g)}g({old:r&&
r.container(),"new":k&&k.container()});if(r=k){r.on("move",f);r.on("container",g)}return d};return d};s.arrow=function(){function f(l){if(!(l.ctrlKey||l.altKey||l.metaKey)){var e=Date.now(),q=0,t=0,n=0;switch(l.keyCode){case 37:if(!c.left){h=e;c.left=1;c.right||(q=r)}break;case 39:if(!c.right){h=e;c.right=1;c.left||(q=-r)}break;case 38:if(!c.up){h=e;c.up=1;c.down||(t=r)}break;case 40:if(!c.down){h=e;c.down=1;c.up||(t=-r)}break;case 109:case 189:if(!c.plus){h=e;c.plus=1;c.minus||(n=-1)}break;case 61:case 187:if(!c.minus){h=
e;c.minus=1;c.plus||(n=1)}break;default:return}if(n){e=k.zoom();k.zoom(n<0?Math.ceil(e)-1:Math.floor(e)+1)}else if(q||t)k.panBy({x:q,y:t});if(!i&&c.left|c.right|c.up|c.down)i=setInterval(g,j);l.preventDefault()}}function a(l){h=Date.now();switch(l.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;case 109:case 189:c.plus=0;break;case 61:case 187:c.minus=0;break;default:return}if(i&&!(c.left|c.right|c.up|c.down))i=clearInterval(i);l.preventDefault()}
function g(){if(k)if(!(Date.now()<h+o)){var l=(c.left-c.right)*r,e=(c.up-c.down)*r;if(l||e)k.panBy({x:l,y:e})}}var d={},c={left:0,right:0,up:0,down:0,plus:0,minus:0},h=0,i,o=250,j=50,r=16,k;d.map=function(l){if(!arguments.length)return k;k=l;var e=k.focusableParent();e.addEventListener("keydown",f,false);e.addEventListener("keyup",a,false);return d};d.speed=function(l){if(!arguments.length)return r;r=l;return d};return d};s.hash=function(){function f(){var i=h.center(),o=h.zoom(),j=Math.max(0,Math.ceil(Math.log(o)/
Math.LN2));i="#"+o.toFixed(2)+"/"+i.lat.toFixed(j)+"/"+i.lon.toFixed(j);if(d!==i)location.replace(d=i)}function a(){if(location.hash!==d){var i=(d=location.hash).substring(1).split("/").map(Number);if(i.length<3||i.some(isNaN))f();else{var o=h.size();h.zoomBy(i[0]-h.zoom(),{x:o.x/2,y:o.y/2},{lat:Math.min(c,Math.max(-c,i[1])),lon:i[2]})}}}var g={},d,c=89.99999999,h;g.map=function(i){if(!arguments.length)return h;h&&h.off("move",f);(h=i).on("move",f);window.addEventListener("hashchange",a,false);location.hash?
a():f();return g};return g};s.interact=function(){var f={},a=s.drag(),g=s.wheel(),d=s.dblclick(),c=s.arrow();f.map=function(h){a.map(h);g.map(h);d.map(h);c.map(h);return f};return f};s.compass=function(){function f(x){q.setAttribute("class","compass active");y||(y=setInterval(function(){D&&Date.now()>B+H&&E.panBy(D)},G));D&&E.panBy(D);B=Date.now();o(x)}function a(){q.setAttribute("class","compass");if(y){clearInterval(y);y=0}}function g(x){return function(){x?this.setAttribute("class","active"):this.removeAttribute("class");
D=x}}function d(x){return function(v){q.setAttribute("class","compass active");var z=E.zoom();E.zoom(x<0?Math.ceil(z)-1:Math.floor(z)+1);o(v)}}function c(x){return function(v){E.zoom(x);o(v)}}function h(){this.setAttribute("class","active")}function i(){this.removeAttribute("class")}function o(x){x.stopPropagation();x.preventDefault()}function j(x){var v=Math.SQRT1_2*n,z=n*0.7,A=n*0.2,F=s.svg("g"),I=F.appendChild(s.svg("path")),N=F.appendChild(s.svg("path"));I.setAttribute("class","direction");I.setAttribute("pointer-events",
"all");I.setAttribute("d","M0,0L"+v+","+v+"A"+n+","+n+" 0 0,1 "+-v+","+v+"Z");N.setAttribute("class","chevron");N.setAttribute("d","M"+A+","+(z-A)+"L0,"+z+" "+-A+","+(z-A));N.setAttribute("pointer-events","none");F.addEventListener("mousedown",f,false);F.addEventListener("mouseover",g(x),false);F.addEventListener("mouseout",g(null),false);F.addEventListener("dblclick",o,false);return F}function r(x){var v=n*0.4,z=v/2,A=s.svg("g"),F=A.appendChild(s.svg("path")),I=A.appendChild(s.svg("path")),N=A.appendChild(s.svg("path")),
M=A.appendChild(s.svg("path"));F.setAttribute("class","back");F.setAttribute("d","M"+-v+",0V"+-v+"A"+v+","+v+" 0 1,1 "+v+","+-v+"V0Z");I.setAttribute("class","direction");I.setAttribute("d",F.getAttribute("d"));N.setAttribute("class","chevron");N.setAttribute("d","M"+-z+","+-v+"H"+z+(x>0?"M0,"+(-v-z)+"V"+-z:""));M.setAttribute("class","fore");M.setAttribute("fill","none");M.setAttribute("d",F.getAttribute("d"));A.addEventListener("mousedown",d(x),false);A.addEventListener("mouseover",h,false);A.addEventListener("mouseout",
i,false);A.addEventListener("dblclick",o,false);return A}function k(x){var v=n*0.2,z=n*0.4,A=s.svg("g"),F=A.appendChild(s.svg("rect")),I=A.appendChild(s.svg("path"));F.setAttribute("pointer-events","all");F.setAttribute("fill","none");F.setAttribute("x",-z);F.setAttribute("y",-0.75*z);F.setAttribute("width",2*z);F.setAttribute("height",1.5*z);I.setAttribute("class","chevron");I.setAttribute("d","M"+-v+",0H"+v);A.addEventListener("mousedown",c(x),false);A.addEventListener("dblclick",o,false);return A}
function l(){if(q){var x=n+6,v=x,z=E.size();switch(C){case "top-left":break;case "top-right":x=z.x-x;break;case "bottom-left":v=z.y-v;break;case "bottom-right":x=z.x-x;v=z.y-v;break}q.setAttribute("transform","translate("+x+","+v+")");for(var A in t)A==E.zoom()?t[A].setAttribute("class","active"):t[A].removeAttribute("class")}}var e={},q,t={},n=30,w=16,B=0,H=250,G=50,C="top-left",m="small",u="small",y,D,E;e.radius=function(x){if(!arguments.length)return n;n=x;return e};e.speed=function(x){if(!arguments.length)return n;
w=x;return e};e.position=function(x){if(!arguments.length)return C;C=x;return e};e.pan=function(x){if(!arguments.length)return u;u=x;return e};e.zoom=function(x){if(!arguments.length)return m;m=x;return e};e.map=function(x){if(!arguments.length)return E;E=x;E.on("move",l);E.on("resize",l);q=E.container().appendChild(s.svg("g"));q.setAttribute("class","compass");if(u!="none"){var v=q.appendChild(s.svg("g"));v.setAttribute("class","pan");var z=v.appendChild(s.svg("circle"));z.setAttribute("class","back");
z.setAttribute("r",n);v.appendChild(j({x:0,y:-w})).setAttribute("transform","rotate(0)");v.appendChild(j({x:w,y:0})).setAttribute("transform","rotate(90)");v.appendChild(j({x:0,y:w})).setAttribute("transform","rotate(180)");v.appendChild(j({x:-w,y:0})).setAttribute("transform","rotate(270)");v=v.appendChild(s.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",n);window.addEventListener("mouseup",a,false)}if(m!="none"){v=q.appendChild(s.svg("g"));v.setAttribute("class",
"zoom");z=-0.5;if(m=="big"){t={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(t[A]=v.appendChild(k(A))).setAttribute("transform","translate(0,"+-(z+0.75)*n*0.4+")")}A=u=="none"?0.4:2;v.setAttribute("transform","translate(0,"+n*(/^top-/.test(C)?A+(z+0.5)*0.4:-A)+")");v.appendChild(r(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*n*0.4+")");v.appendChild(r(-1)).setAttribute("transform","scale(-1)")}l();return e};return e};s.grid=function(){function f(){var c=d.firstChild,h=g.size(),
i=g.pointLocation(R);g.pointLocation(h);var o=Math.pow(2,4-Math.round(g.zoom()));i.lat=Math.floor(i.lat/o)*o;i.lon=Math.ceil(i.lon/o)*o;for(var j;(j=g.locationPoint(i).x)<=h.x;i.lon+=o){c||(c=d.appendChild(s.svg("line")));c.setAttribute("x1",j);c.setAttribute("x2",j);c.setAttribute("y1",0);c.setAttribute("y2",h.y);c=c.nextSibling}for(;(j=g.locationPoint(i).y)<=h.y;i.lat-=o){c||(c=d.appendChild(s.svg("line")));c.setAttribute("y1",j);c.setAttribute("y2",j);c.setAttribute("x1",0);c.setAttribute("x2",
h.x);c=c.nextSibling}for(;c;){h=c.nextSibling;d.removeChild(c);c=h}}var a={},g,d;a.map=function(c){if(!arguments.length)return g;g=c;g.on("move",f);g.on("resize",f);if(!d){d=s.svg("g");d.setAttribute("class","grid")}g.container().appendChild(d);f();return a};return a}})(org.polymaps);
