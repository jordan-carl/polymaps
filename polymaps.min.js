if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(t){function fa(d){var g=d.indexOf(":");return g<0?d:{space:t.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function Z(d,g){if(d.row>g.row){var c=d;d=g;g=c}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ca(d,g,c,l,h){c=Math.max(c,Math.floor(g.y0));
l=Math.min(l,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var a=d;d=g;g=a}a=d.dx/d.dy;var f=g.dx/g.dy,i=d.dx>0,n=g.dx<0;for(c=c;c<l;c++){var o=a*Math.max(0,Math.min(d.dy,c+i-d.y0))+d.x0;h(Math.floor(f*Math.max(0,Math.min(g.dy,c+n-g.y0))+g.x0),Math.ceil(o),c)}}function da(d,g,c,l,h,a){var f=Z(d,g);g=Z(g,c);d=Z(c,d);if(f.dy>g.dy){c=f;f=g;g=c}if(f.dy>d.dy){c=f;f=d;d=c}if(g.dy>d.dy){c=g;g=d;d=c}f.dy&&ca(d,f,l,h,a);g.dy&&ca(d,g,l,h,a)}t.version="2.4.0";
var Y={x:0,y:0};t.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};t.id=function(){var d=0;return function(){return++d}}();t.svg=function(d){return document.createElementNS(t.ns.svg,d)};t.transform=function(d,g,c,l,h,a){var f={},i,n,o;if(!arguments.length){d=1;g=h=c=0;l=1;a=0}f.zoomFraction=function(m){if(!arguments.length)return n;n=m;i=Math.floor(n+Math.log(Math.sqrt(d*d+g*g+c*c+l*l))/Math.log(2));o=Math.pow(2,-i);return f};f.apply=function(m){var j=Math.pow(2,-m.zoom),
u=Math.pow(2,m.zoom-i);return{column:(d*m.column*j+c*m.row*j+h)*u,row:(g*m.column*j+l*m.row*j+a)*u,zoom:m.zoom-i}};f.unapply=function(m){var j=Math.pow(2,-m.zoom),u=Math.pow(2,m.zoom+i);return{column:(m.column*j*l-m.row*j*c-h*l+a*c)/(d*l-g*c)*u,row:(m.column*j*g-m.row*j*d-h*g+a*d)/(c*g-l*d)*u,zoom:m.zoom+i}};f.toString=function(){return"matrix("+[d*o,g*o,c*o,l*o].join(" ")+" 0 0)"};return f.zoomFraction(0)};t.cache=function(d,g){function c(j){m--;g&&g(j);delete f[j.key];if(j.next)j.next.prev=j.prev;
else if(n=j.prev)n.next=null;if(j.prev)j.prev.next=j.next;else if(i=j.next)i.prev=null}function l(){for(var j=n;m>o;j=j.prev){if(!j)break;j.lock||c(j)}}var h={},a={},f={},i=null,n=null,o=64,m=0;h.peek=function(j){return f[[j.zoom,j.column,j.row].join("/")]};h.load=function(j,u){var y=[j.zoom,j.column,j.row].join("/"),A=f[y];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else n=A.prev;A.prev=null;A.next=i;i=i.prev=A}A.lock=1;return a[y]=A}A={key:y,column:j.column,row:j.row,zoom:j.zoom,next:i,
prev:null,lock:1};d.call(null,A,u);a[y]=f[y]=A;if(i)i.prev=A;else n=A;i=A;m++;return A};h.unload=function(j){if(!(j in a))return false;var u=a[j];u.lock=0;delete a[j];u.request&&u.request.abort(false)&&c(u);return u};h.locks=function(){return a};h.size=function(j){if(!arguments.length)return o;o=j;l();return h};h.flush=function(){l();return h};h.clear=function(){for(var j in f){var u=f[j];u.request&&u.request.abort(false);g&&g(f[j]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}a=
{};f={};i=n=null;m=0;return h};return h};t.url=function(d){function g(l){var h=l.zoom<0?1:1<<l.zoom,a=l.column%h;if(a<0)a+=h;return d.replace(/{(.)}/g,function(f,i){switch(i){case "S":return c[(Math.abs(l.zoom)+l.row+a)%c.length];case "Z":return l.zoom;case "X":return a;case "Y":return l.row;case "B":var n=t.map.coordinateLocation({row:l.row,column:a,zoom:l.zoom}),o=t.map.coordinateLocation({row:l.row+1,column:a+1,zoom:l.zoom}),m=Math.ceil(Math.log(l.zoom)/Math.LN2);return o.lat.toFixed(m)+","+n.lon.toFixed(m)+
","+n.lat.toFixed(m)+","+o.lon.toFixed(m)}return i})}var c=[];g.template=function(l){if(!arguments.length)return d;d=l;return g};g.hosts=function(l){if(!arguments.length)return c;c=l;return g};return g};t.dispatch=function(d){var g={};d.on=function(c,l){for(var h=g[c]||(g[c]=[]),a=0;a<h.length;a++)if(h[a].handler==l)return d;h.push({handler:l,on:true});return d};d.off=function(c,l){var h=g[c];if(h)for(var a=0;a<h.length;a++){var f=h[a];if(f.handler==l){f.on=false;h.splice(a,1);break}}return d};return function(c){var l=
g[c.type];if(l){l=l.slice();for(var h=0;h<l.length;h++){var a=l[h];a.on&&a.handler.call(d,c)}}}};t.queue=function(){function d(){if(!(h>=a||!l.length)){h++;l.pop()()}}function g(f){for(var i=0;i<l.length;i++)if(l[i]==f){l.splice(i,1);return true}return false}function c(f,i,n){function o(){m=new XMLHttpRequest;n&&m.overrideMimeType(n);m.open("GET",f,true);m.onreadystatechange=function(){if(m.readyState==4){h--;m.status<300&&i(m);d()}};m.send(null)}var m;l.push(o);d();return{abort:function(j){if(g(o))return true;
if(j&&m){m.abort();return true}return false}}}var l=[],h=0,a=6;return{text:function(f,i,n){return c(f,function(o){o.responseText&&i(o.responseText)},n)},xml:function(f,i){return c(f,function(n){n.responseXML&&i(n.responseXML)},"application/xml")},json:function(f,i){return c(f,function(n){n.responseText&&i(JSON.parse(n.responseText))},"application/json")},image:function(f,i,n){function o(){m=document.createElement("img");m.onerror=function(){h--;d()};m.onload=function(){h--;n(m);d()};m.src=i;f.setAttributeNS(t.ns.xlink,
"href",i)}var m;l.push(o);d();return{abort:function(j){if(g(o))return true;if(j&&m){m.src="about:";return true}return false}}}}}();t.map=function(){function d(){if(u)if(o<u[0])o=u[0];else if(o>u[1])o=u[1];m=o-(o=Math.round(o));j=Math.pow(2,m)}function g(){if(q){var e=45/Math.pow(2,o+m-3),s=Math.max(Math.abs(C*f.x+A*f.y),Math.abs(B*f.x+E*f.y)),r=V(K-s*e/i.y);s=V(k+s*e/i.y);n.lat=Math.max(r,Math.min(s,n.lat));r=Math.max(Math.abs(C*f.y+A*f.x),Math.abs(B*f.y+E*f.x));n.lon=Math.max(q[0].lon-r*e/i.x,Math.min(q[1].lon+
r*e/i.x,n.lon))}}var c={},l,h,a=Y,f=Y,i={x:256,y:256},n={lat:37.76487,lon:-122.41948},o=12,m=0,j=1,u=[1,18],y=0,A=1,C=0,E=1,B=0,K=-180,k=180,q=[{lat:V(K),lon:-Infinity},{lat:V(k),lon:Infinity}];c.locationCoordinate=function(e){e=t.map.locationCoordinate(e);var s=Math.pow(2,o);e.column*=s;e.row*=s;e.zoom+=o;return e};c.coordinateLocation=t.map.coordinateLocation;c.coordinatePoint=function(e,s){var r=Math.pow(2,o-s.zoom),z=Math.pow(2,o-e.zoom),v=(s.column*r-e.column*z)*i.x*j;r=(s.row*r-e.row*z)*i.y*
j;return{x:f.x+A*v-C*r,y:f.y+C*v+A*r}};c.pointCoordinate=function(e,s){var r=Math.pow(2,o-e.zoom),z=(s.x-f.x)/j,v=(s.y-f.y)/j;return{column:e.column*r+(E*z-B*v)/i.x,row:e.row*r+(B*z+E*v)/i.y,zoom:o}};c.locationPoint=function(e){var s=Math.pow(2,o+m-3)/45,r=(e.lon-n.lon)*s*i.x;e=(W(n.lat)-W(e.lat))*s*i.y;return{x:f.x+A*r-C*e,y:f.y+C*r+A*e}};c.pointLocation=function(e){var s=45/Math.pow(2,o+m-3),r=(e.x-f.x)*s;e=(e.y-f.y)*s;return{lon:n.lon+(E*r-B*e)/i.x,lat:V(W(n.lat)-(B*r+E*e)/i.y)}};var w=t.svg("rect");
w.setAttribute("visibility","hidden");w.setAttribute("pointer-events","all");c.container=function(e){if(!arguments.length)return l;l=e;l.setAttribute("class","map");l.appendChild(w);return c.resize()};c.focusableParent=function(){for(var e=l;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};c.mouse=function(e){var s=(l.ownerSVGElement||l).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var r=document.body.appendChild(t.svg("svg"));r.style.position="absolute";r.style.top=r.style.left=
"0px";var z=r.getScreenCTM();$=!(z.f||z.e);document.body.removeChild(r)}if($){s.x=e.pageX;s.y=e.pageY}else{s.x=e.clientX;s.y=e.clientY}return s.matrixTransform(l.getScreenCTM().inverse())};c.size=function(e){if(!arguments.length)return a;h=e;return c.resize()};c.resize=function(){if(h){a=h;S.remove(c)}else{w.setAttribute("width","100%");w.setAttribute("height","100%");b=w.getBBox();a={x:b.width,y:b.height};S.add(c)}w.setAttribute("width",a.x);w.setAttribute("height",a.y);f={x:a.x/2,y:a.y/2};g();c.dispatch({type:"resize"});
return c};c.tileSize=function(e){if(!arguments.length)return i;i=e;c.dispatch({type:"move"});return c};c.center=function(e){if(!arguments.length)return n;n=e;g();c.dispatch({type:"move"});return c};c.panBy=function(e){var s=45/Math.pow(2,o+m-3),r=e.x*s;e=e.y*s;return c.center({lon:n.lon+(B*e-E*r)/i.x,lat:V(W(n.lat)+(B*r+E*e)/i.y)})};c.centerRange=function(e){if(!arguments.length)return q;if(q=e){K=q[0].lat>-90?W(q[0].lat):-Infinity;k=q[0].lat<90?W(q[1].lat):Infinity}else{K=-Infinity;k=Infinity}g();
c.dispatch({type:"move"});return c};c.zoom=function(e){if(!arguments.length)return o+m;o=e;d();return c.center(n)};c.zoomBy=function(e,s,r){if(arguments.length<2)return c.zoom(o+m+e);if(arguments.length<3)r=c.pointLocation(s);o=o+m+e;d();var z=c.locationPoint(r);return c.panBy({x:s.x-z.x,y:s.y-z.y})};c.zoomRange=function(e){if(!arguments.length)return u;u=e;return c.zoom(o+m)};c.extent=function(e){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var s=c.locationPoint(e[0]),
r=c.locationPoint(e[1]),z=Math.max((r.x-s.x)/a.x,(s.y-r.y)/a.y);s=c.pointLocation({x:(s.x+r.x)/2,y:(s.y+r.y)/2});o=o+m-Math.log(z)/Math.log(2);d();return c.center(s)};c.angle=function(e){if(!arguments.length)return y;y=e;A=Math.cos(y);C=Math.sin(y);E=Math.cos(-y);B=Math.sin(-y);g();c.dispatch({type:"move"});return c};c.add=function(e){e.map(c);return c};c.remove=function(e){e.map(null);return c};c.dispatch=t.dispatch(c);return c};S.maps=[];S.add=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==
d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d){S.maps.splice(g,1);return}};window.addEventListener("resize",S,false);t.map.locationCoordinate=function(d){var g=1/360;return{column:(d.lon+180)*g,row:(180-W(d.lat))*g,zoom:0}};t.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:V(180-g*d.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;t.layer=function(d,g){function c(B){for(var K=C[0].nextSibling;A<B;A++){u.insertBefore(C[-4],
K);u.insertBefore(C[2],K);u.insertBefore(C[1],K);for(var k=C[-4],q=-4;q<2;)C[q]=C[++q];C[q]=k}}function l(B){for(var K=C[0].nextSibling;A>B;A--){u.insertBefore(C[-1],K);u.insertBefore(C[2],C[-4]);for(var k=C[2],q=2;q>-4;)C[q]=C[--q];C[q]=k}}function h(){function B(O){var H=O.zoom,T=H<0?1:1<<H,U=O.column%T,x=O.row;if(U<0)U+=T;return{locationPoint:function(D){D=t.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:r.x*(G*D.column-U),y:r.y*(G*D.row-x)}}}}function K(O,H,T){var U=I.zoom,x=2-
R,D=4+R;for(O=O;O<H;O++){var G=f.load({column:O,row:T,zoom:U},B);if(!G.ready&&!(G.key in M)){G.proxyRefs={};for(var J,N,P,Q=1;Q<=x;Q++){N=true;for(var X=0,ea=1<<Q;X<=ea;X++)for(var aa=0;aa<=ea;aa++)if((P=f.peek(J={column:(O<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&P.ready){M[P.key]=f.load(J);P.proxyCount++;G.proxyRefs[P.key]=P}else N=false;if(N)break}if(!N)for(Q=1;Q<=D;Q++)if((P=f.peek(J={column:O>>Q,row:T>>Q,zoom:U-Q}))&&P.ready){M[P.key]=f.load(J);P.proxyCount++;G.proxyRefs[P.key]=P;break}}M[G.key]=G}}
var k=a.map(),q=k.zoom(),w=q-(q=Math.round(q)),e=k.size(),s=k.angle(),r=k.tileSize(),z=k.locationCoordinate(k.center());if(A!=q){if(A<q)c(q);else if(A>q)l(q);else A=q;for(var v=-4;v<=2;v++){var L=C[v];L.setAttribute("class","zoom"+(v<0?"":"+")+v+" zoom"+(q+v));L.setAttribute("transform","scale("+Math.pow(2,-v)+")")}}u.setAttribute("transform","translate("+e.x/2+","+e.y/2+")"+(s?"rotate("+s/Math.PI*180+")":"")+(w?"scale("+Math.pow(2,w)+")":"")+(y?y.zoomFraction(w):""));var I=k.pointCoordinate(z,Y);
v=k.pointCoordinate(z,{x:e.x,y:0});q=k.pointCoordinate(z,e);k=k.pointCoordinate(z,{x:0,y:e.y});if(!w&&!s&&!y){z.column=(Math.round(r.x*z.column)+(e.x&1)/2)/r.x;z.row=(Math.round(r.y*z.row)+(e.y&1)/2)/r.y}if(y){I=y.unapply(I);v=y.unapply(v);q=y.unapply(q);k=y.unapply(k);z=y.unapply(z)}var R=o?o(I.zoom)-I.zoom:0;if(R){e=Math.pow(2,R);I.column*=e;I.row*=e;v.column*=e;v.row*=e;q.column*=e;q.row*=e;k.column*=e;k.row*=e;I.zoom=v.zoom=q.zoom=k.zoom+=R}w=f.locks();var M={};for(var F in w)w[F].proxyCount=
0;if(n&&R>-5&&R<3){s=I.zoom<0?1:1<<I.zoom;if(i){da(I,v,q,0,s,K);da(q,k,I,0,s,K)}else{e=Math.floor((I.column+q.column)/2);s=Math.max(0,Math.min(s-1,Math.floor((v.row+k.row)/2)));v=Math.min(4,I.zoom);e=e>>v<<v;s=s>>v<<v;K(e,e+1,s)}}for(F in M){v=M[F];e=Math.pow(2,v.level=v.zoom-z.zoom);v.element.setAttribute("transform","translate("+(v.x=r.x*(v.column-z.column*e))+","+(v.y=r.y*(v.row-z.row*e))+")")}for(F in w)if(!(F in M)){v=f.unload(F);v.element.parentNode.removeChild(v.element);delete v.proxyRefs}for(F in M){v=
M[F];if(v.element.parentNode!=C[v.level]){C[v.level].appendChild(v.element);a.show&&a.show(v)}}f.flush();a.dispatch({type:"move"})}var a={},f=a.cache=t.cache(d,g).size(512),i=true,n=true,o,m,j,u=t.svg("g"),y,A,C={};u.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=u.appendChild(t.svg("g"));for(E=2;E>=1;E--)C[E]=u.appendChild(t.svg("g"));C[0]=u.appendChild(t.svg("g"));a.map=function(B){if(!arguments.length)return j;if(j){if(j==B){u.parentNode.appendChild(u);return a}j.off("move",h).off("resize",
h);u.parentNode.removeChild(u)}if(j=B){j.container().appendChild(u);a.init&&a.init(u);j.on("move",h).on("resize",h);h()}return a};a.container=function(){return u};a.levels=function(){return C};a.id=function(B){if(!arguments.length)return m;m=B;u.setAttribute("id",B);return a};a.visible=function(B){if(!arguments.length)return n;(n=B)?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");j&&h();return a};a.transform=function(B){if(!arguments.length)return y;y=B;j&&h();return a};a.zoom=
function(B){if(!arguments.length)return o;o=typeof B=="function"||B==null?B:function(){return B};j&&h();return a};a.tile=function(B){if(!arguments.length)return i;i=B;j&&h();return a};a.reload=function(){f.clear();j&&h();return a};a.dispatch=t.dispatch(a);a.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var k=B.tile.proxyRefs[K];--k.proxyCount<=0&&f.unload(K)&&k.element.parentNode.removeChild(k.element)}delete B.tile.proxyRefs}});return a};t.image=function(){var d=t.layer(function(c){var l=
c.element=t.svg("image"),h=d.map().tileSize();l.setAttribute("preserveAspectRatio","none");l.setAttribute("width",h.x);l.setAttribute("height",h.y);if(typeof g=="function"){l.setAttribute("opacity",0);c.request=t.queue.image(l,g(c),function(a){delete c.request;c.ready=true;c.img=a;l.removeAttribute("opacity");d.dispatch({type:"load",tile:c})})}else{c.ready=true;g&&l.setAttributeNS(t.ns.xlink,"href",g);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),g;d.url=function(c){if(!arguments.length)return g;
g=typeof c=="string"&&/{.}/.test(c)?t.url(c):c;return d.reload()};return d};t.geoJson=function(d){function g(k){var q={lat:0,lon:0};return function(w){q.lat=w[1];q.lon=w[0];var e=k(q);w.x=e.x;w.y=e.y;return e}}function c(k,q){return k&&k.type in C&&C[k.type](k,q)}function l(k,q,w){return k.type in E&&E[k.type](k,q,w)}function h(){var k=a.map().zoom(),q=a.cache.locks(),w,e,s,r,z,v,L;if(y=="fixed")for(w in q){if((e=q[w]).scale!=k){L="scale("+Math.pow(2,e.zoom-k)+")";r=-1;for(z=(s=e.features).length;++r<
z;)l((v=s[r]).data.geometry,v.element,L);e.scale=k}}else for(w in q){r=-1;for(z=(s=(e=q[w]).features).length;++r<z;)l((v=s[r]).data.geometry,v.element,"");delete e.scale}}var a=t.layer(function(k,q){function w(s){var r=[];if(s.next)k.request=d(s.next.href,w);switch(s.type){case "FeatureCollection":for(var z=0;z<s.features.length;z++){var v=s.features[z],L=c(v.geometry,q);L&&r.push({element:e.appendChild(L),data:v})}break;case "Feature":(L=c(s.geometry,q))&&r.push({element:e.appendChild(L),data:s});
break;default:(L=c(s,q))&&r.push({element:e.appendChild(L),data:{type:"Feature",geometry:s}});break}k.ready=true;r.push.apply(k.features,r);a.dispatch({type:"load",tile:k,features:r})}var e=k.element=t.svg("g");k.features=[];q=g(q(k).locationPoint);if(i!=null)k.request=d(typeof i=="function"?i(k):i,w);else w({type:"FeatureCollection",features:A||[]})},function(k){k.request&&k.request.abort(true)}),f=a.container(),i,n=true,o="org.polymaps."+t.id(),m="url(#"+o+")",j=f.insertBefore(t.svg("clipPath"),
f.firstChild),u=j.appendChild(t.svg("rect")),y="auto",A;f.setAttribute("fill-rule","evenodd");j.setAttribute("id",o);if(!arguments.length)d=t.queue.json;var C={Point:function(k,q){var w=q(k.coordinates),e=t.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform","translate("+w.x+","+w.y+")");return e},MultiPoint:function(k,q){for(var w=t.svg("g"),e=k.coordinates,s,r,z=-1,v=e.length;++z<v;){r=w.appendChild(t.svg("circle"));r.setAttribute("r",4.5);r.setAttribute("transform","translate("+(s=
q(e[z])).x+","+s.y+")")}return w},LineString:function(k,q){for(var w=t.svg("path"),e=["M"],s=k.coordinates,r,z=-1,v=s.length;++z<v;)e.push((r=q(s[z])).x,",",r.y,"L");e.pop();if(e.length){w.setAttribute("d",e.join(""));return w}},MultiLineString:function(k,q){for(var w=t.svg("path"),e=[],s=k.coordinates,r,z=-1,v,L=s.length,I;++z<L;){r=s[z];v=-1;I=r.length;for(e.push("M");++v<I;)e.push((p=q(r[v])).x,",",p.y,"L");e.pop()}if(e.length){w.setAttribute("d",e.join(""));return w}},Polygon:function(k,q){for(var w=
t.svg("path"),e=[],s=k.coordinates,r,z=-1,v,L=s.length,I;++z<L;){r=s[z];v=-1;I=r.length-1;for(e.push("M");++v<I;)e.push((p=q(r[v])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){w.setAttribute("d",e.join(""));return w}},MultiPolygon:function(k,q){for(var w=t.svg("path"),e=[],s=k.coordinates,r,z,v=-1,L,I,R=s.length,M,F;++v<R;){r=s[v];L=-1;for(M=r.length;++L<M;){z=r[L];I=-1;F=z.length-1;for(e.push("M");++I<F;)e.push((p=q(z[I])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){w.setAttribute("d",e.join(""));
return w}},GeometryCollection:function(k,q){for(var w=t.svg("g"),e=-1,s=k.geometries,r=s.length,z;++e<r;)(z=c(s[e],q))&&w.appendChild(z);return w}},E={Point:function(k,q,w){k=k.coordinates;q.setAttribute("transform","translate("+k.x+","+k.y+")"+w)},MultiPoint:function(k,q,w){k=k.coordinates;var e=-1,s=r.length;q=q.firstChild;for(var r;++e<s;){r=k[e];q.setAttribute("transform","translate("+r.x+","+r.y+")"+w);q=q.nextSibling}}};a.url=function(k){if(!arguments.length)return i;i=typeof k=="string"&&/{.}/.test(k)?
t.url(k):k;if(i!=null)A=null;typeof i=="string"&&a.tile(false);return a.reload()};a.features=function(k){if(!arguments.length)return A;if(A=k){i=null;a.tile(false)}return a.reload()};a.clip=function(k){if(!arguments.length)return n;n&&f.removeChild(j);if(n=k)f.insertBefore(j,f.firstChild);var q=a.cache.locks();for(var w in q)n?q[w].element.setAttribute("clip-path",m):q[w].element.removeAttribute("clip-path");return a};var B=a.tile;a.tile=function(k){arguments.length&&!k&&a.clip(k);return B.apply(a,
arguments)};var K=a.map;a.map=function(k){if(k&&u){var q=k.tileSize();u.setAttribute("width",q.x);u.setAttribute("height",q.y)}return K.apply(a,arguments)};a.scale=function(k){if(!arguments.length)return y;(y=k)?a.on("move",h):a.off("move",h);a.map()&&h();return a};a.show=function(k){n?k.element.setAttribute("clip-path",m):k.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:k,features:k.features});return a};a.reshow=function(){var k=a.cache.locks();for(var q in k)a.show(k[q]);return a};
return a};t.dblclick=function(){function d(a){var f=l.zoom();f=a.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);c==="mouse"?l.zoomBy(f,l.mouse(a)):l.zoomBy(f)}var g={},c="mouse",l,h;g.zoom=function(a){if(!arguments.length)return c;c=a;return g};g.map=function(a){if(!arguments.length)return l;if(l){h.removeEventListener("dblclick",d,false);h=null}if(l=a){h=l.container();h.addEventListener("dblclick",d,false)}return g};return g};t.drag=function(){function d(f){if(!f.shiftKey){a={x:f.clientX,y:f.clientY};
l.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(a){l.panBy({x:f.clientX-a.x,y:f.clientY-a.y});a.x=f.clientX;a.y=f.clientY}}var c={},l,h,a;c.map=function(f){if(!arguments.length)return l;if(l){h.removeEventListener("mousedown",d,false);h=null}if(l=f){h=l.container();h.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(a){g(f);a=null;document.body.style.removeProperty("cursor")}},
false);return c};t.touch=function(){function d(i){f&&c();i.preventDefault();f=l(i)}function g(i){if(!f)return d(i);i.preventDefault();i=l(i);var n={x:i.clientX-f.clientX,y:i.clientY-f.clientY,scale:i.scale-f.scale};if(n.x||n.y||n.scale){var o=a.mouse(f);o=a.pointLocation(o);a.zoomBy(n.scale,a.mouse(i),o)}f=i}function c(){f=null}function l(i){for(var n=i.touches,o=0,m=0,j=0;j<n.length;++j){var u=n[j];o+=u.clientX;m+=u.clientY}return{clientX:o/n.length,pageX:o/n.length,clientY:m/n.length,pageY:m/n.length,
scale:i.scale}}var h={},a,f;h.map=function(i){if(!arguments.length)return a;if(a){var n=a.container();n.removeEventListener("touchstart",d,false);n.removeEventListener("touchmove",g,false);n.removeEventListener("touchend",c,false);n.removeEventListener("touchcancel",c,false)}if(a=i){n=a.container();n.addEventListener("touchstart",d,false);n.addEventListener("touchmove",g,false);n.addEventListener("touchend",c,false);n.addEventListener("touchcancel",c,false)}return h};return h};t.wheel=function(){function d(){i=
null}function g(m){var j=(m.wheelDelta/120||-m.detail)*0.1,u;if(ba<0){u=Date.now();var y=u-h;if(y>9&&Math.abs(m.wheelDelta)/y>=50)ba=1;h=u}if(ba==1)j*=0.03;if(!a&&j){u=Date.now();if(u-l>200){j=j>0?+1:-1;l=u}else j=0}if(j)switch(f){case "mouse":u=n.mouse(m);i||(i=n.pointLocation(u));n.off("move",d).zoomBy(j,u,i).on("move",d);break;case "location":n.zoomBy(j,n.locationPoint(i),i);break;default:n.zoomBy(j);break}m.preventDefault();return false}var c={},l=0,h=0,a=true,f="mouse",i,n,o;c.smooth=function(m){if(!arguments.length)return a;
a=m;return c};c.zoom=function(m,j){if(!arguments.length)return f;f=m;i=j;if(n)f=="mouse"?n.on("move",d):n.off("move",d);return c};c.map=function(m){if(!arguments.length)return n;if(n){o.removeEventListener("mousemove",d,false);o.removeEventListener("mousewheel",g,false);o.removeEventListener("DOMMouseScroll",g,false);o=null;n.off("move",d)}if(n=m){f=="mouse"&&n.on("move",d);o=n.container();o.addEventListener("mousemove",d,false);o.addEventListener("mousewheel",g,false);o.addEventListener("DOMMouseScroll",
g,false)}return c};return c};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;t.arrow=function(){function d(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var A=Date.now(),C=0,E=0;switch(y.keyCode){case 37:if(!a.left){f=A;a.left=1;a.right||(C=m)}break;case 39:if(!a.right){f=A;a.right=1;a.left||(C=-m)}break;case 38:if(!a.up){f=A;a.up=1;a.down||(E=m)}break;case 40:if(!a.down){f=A;a.down=1;a.up||(E=-m)}break;default:return}if(C||E)j.panBy({x:C,y:E});if(!i&&a.left|a.right|a.up|a.down)i=setInterval(l,o);
y.preventDefault()}}function g(y){f=Date.now();switch(y.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(i&&!(a.left|a.right|a.up|a.down))i=clearInterval(i);y.preventDefault()}function c(y){switch(y.charCode){case 45:case 95:j.zoom(Math.ceil(j.zoom())-1);break;case 43:case 61:j.zoom(Math.floor(j.zoom())+1);break;default:return}y.preventDefault()}function l(){if(j)if(!(Date.now()<f+n)){var y=(a.left-a.right)*m,A=(a.up-a.down)*m;if(y||
A)j.panBy({x:y,y:A})}}var h={},a={left:0,right:0,up:0,down:0},f=0,i,n=250,o=50,m=16,j,u;h.map=function(y){if(!arguments.length)return j;if(j){u.removeEventListener("keypress",c,false);u.removeEventListener("keydown",d,false);u.removeEventListener("keyup",g,false);u=null}if(j=y){u=j.focusableParent();u.addEventListener("keypress",c,false);u.addEventListener("keydown",d,false);u.addEventListener("keyup",g,false)}return h};h.speed=function(y){if(!arguments.length)return m;m=y;return h};return h};t.hash=
function(){function d(){var i=f(h);if(l!==i)location.replace(l=i)}function g(){if(location.hash!==l)if(a(h,(l=location.hash).substring(1)))d()}var c={},l,h,a=function(i,n){var o=n.split("/").map(Number);if(o.length<3||o.some(isNaN))return true;else{var m=i.size();i.zoomBy(o[0]-i.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,o[1])),lon:o[2]})}},f=function(i){var n=i.center();i=i.zoom();var o=Math.max(0,Math.ceil(Math.log(i)/Math.LN2));return"#"+i.toFixed(2)+"/"+n.lat.toFixed(o)+
"/"+n.lon.toFixed(o)};c.map=function(i){if(!arguments.length)return h;if(h){h.off("move",d);window.removeEventListener("hashchange",g,false)}if(h=i){h.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return c};c.parser=function(i){if(!arguments.length)return a;a=i;return c};c.formatter=function(i){if(!arguments.length)return f;f=i;return c};return c};t.interact=function(){var d={},g=t.drag(),c=t.wheel(),l=t.dblclick(),h=t.arrow();d.map=function(a){g.map(a);c.map(a);
l.map(a);h.map(a);return d};return d};t.compass=function(){function d(x){B.setAttribute("class","compass active");I||(I=setInterval(g,s));R&&H.panBy(R);w=Date.now();return m(x)}function g(){R&&Date.now()>w+e&&H.panBy(R)}function c(x){if(x.shiftKey){F={x0:H.mouse(x)};H.focusableParent().focus();return m(x)}}function l(x){if(F){F.x1=H.mouse(x);O.setAttribute("x",Math.min(F.x0.x,F.x1.x));O.setAttribute("y",Math.min(F.x0.y,F.x1.y));O.setAttribute("width",Math.abs(F.x0.x-F.x1.x));O.setAttribute("height",
Math.abs(F.x0.y-F.x1.y));O.removeAttribute("display")}}function h(){B.setAttribute("class","compass");if(F){if(F.x1){H.extent([H.pointLocation({x:Math.min(F.x0.x,F.x1.x),y:Math.max(F.x0.y,F.x1.y)}),H.pointLocation({x:Math.max(F.x0.x,F.x1.x),y:Math.min(F.x0.y,F.x1.y)})]);O.setAttribute("display","none")}F=null}if(I){clearInterval(I);I=0}}function a(x){return function(){x?this.setAttribute("class","active"):this.removeAttribute("class");R=x}}function f(x){return function(D){B.setAttribute("class","compass active");
var G=H.zoom();H.zoom(x<0?Math.ceil(G)-1:Math.floor(G)+1);return m(D)}}function i(x){return function(D){H.zoom(x);return m(D)}}function n(){this.setAttribute("class","active")}function o(){this.removeAttribute("class")}function m(x){x.stopPropagation();x.preventDefault();return false}function j(x){var D=Math.SQRT1_2*k,G=k*0.7,J=k*0.2,N=t.svg("g"),P=N.appendChild(t.svg("path")),Q=N.appendChild(t.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d",
"M0,0L"+D+","+D+"A"+k+","+k+" 0 0,1 "+-D+","+D+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));Q.setAttribute("pointer-events","none");N.addEventListener("mousedown",d,false);N.addEventListener("mouseover",a(x),false);N.addEventListener("mouseout",a(null),false);N.addEventListener("dblclick",m,false);return N}function u(x){var D=k*0.4,G=D/2,J=t.svg("g"),N=J.appendChild(t.svg("path")),P=J.appendChild(t.svg("path")),Q=J.appendChild(t.svg("path")),
X=J.appendChild(t.svg("path"));N.setAttribute("class","back");N.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",N.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-G+","+-D+"H"+G+(x>0?"M0,"+(-D-G)+"V"+-G:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",N.getAttribute("d"));J.addEventListener("mousedown",f(x),false);J.addEventListener("mouseover",n,false);J.addEventListener("mouseout",
o,false);J.addEventListener("dblclick",m,false);return J}function y(x){var D=k*0.2,G=k*0.4,J=t.svg("g"),N=J.appendChild(t.svg("rect")),P=J.appendChild(t.svg("path"));N.setAttribute("pointer-events","all");N.setAttribute("fill","none");N.setAttribute("x",-G);N.setAttribute("y",-0.75*G);N.setAttribute("width",2*G);N.setAttribute("height",1.5*G);P.setAttribute("class","chevron");P.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",i(x),false);J.addEventListener("dblclick",m,false);return J}
function A(){var x=k+6,D=x,G=H.size();switch(r){case "top-left":break;case "top-right":x=G.x-x;break;case "bottom-left":D=G.y-D;break;case "bottom-right":x=G.x-x;D=G.y-D;break}x="translate("+x+","+D+")";M&&M.setAttribute("transform",x);v&&v.setAttribute("transform",x);for(var J in K)J==H.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);B.appendChild(O);if(L!="none"){M=B.appendChild(t.svg("g"));M.setAttribute("class",
"pan");var x=M.appendChild(t.svg("circle"));x.setAttribute("class","back");x.setAttribute("r",k);M.appendChild(j({x:0,y:-q})).setAttribute("transform","rotate(0)");M.appendChild(j({x:q,y:0})).setAttribute("transform","rotate(90)");M.appendChild(j({x:0,y:q})).setAttribute("transform","rotate(180)");M.appendChild(j({x:-q,y:0})).setAttribute("transform","rotate(270)");x=M.appendChild(t.svg("circle"));x.setAttribute("fill","none");x.setAttribute("class","fore");x.setAttribute("r",k)}else M=null;if(z!=
"none"){v=B.appendChild(t.svg("g"));v.setAttribute("class","zoom");x=-0.5;if(z=="big"){K={};var D=H.zoomRange()[0];for(x=0;D<=H.zoomRange()[1];D++,x++)(K[D]=v.appendChild(y(D))).setAttribute("transform","translate(0,"+-(x+0.75)*k*0.4+")")}D=L=="none"?0.4:2;v.setAttribute("transform","translate(0,"+k*(/^top-/.test(r)?D+(x+0.5)*0.4:-D)+")");v.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(x+0.5)*k*0.4+")");v.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else v=null;A()}var E=
{},B=t.svg("g"),K={},k=30,q=16,w=0,e=250,s=50,r="top-left",z="small",v,L="small",I,R,M,F,O=t.svg("rect"),H,T,U;B.setAttribute("class","compass");O.setAttribute("class","back fore");O.setAttribute("pointer-events","none");O.setAttribute("display","none");E.radius=function(x){if(!arguments.length)return k;k=x;H&&C();return E};E.speed=function(x){if(!arguments.length)return k;q=x;return E};E.position=function(x){if(!arguments.length)return r;r=x;H&&C();return E};E.pan=function(x){if(!arguments.length)return L;
L=x;H&&C();return E};E.zoom=function(x){if(!arguments.length)return z;z=x;H&&C();return E};E.map=function(x){if(!arguments.length)return H;if(H){T.removeEventListener("mousedown",c,false);T.removeChild(B);T=null;U.removeEventListener("mousemove",l,false);U.removeEventListener("mouseup",h,false);U=null;H.off("move",A).off("resize",A)}if(H=x){T=H.container();T.appendChild(B);T.addEventListener("mousedown",c,false);U=T.ownerDocument.defaultView;U.addEventListener("mousemove",l,false);U.addEventListener("mouseup",
h,false);H.on("move",A).on("resize",A);C()}return E};return E};t.grid=function(){function d(){var h=l.firstChild,a=c.size(),f=c.pointLocation(Y);c.pointLocation(a);var i=Math.pow(2,4-Math.round(c.zoom()));f.lat=Math.floor(f.lat/i)*i;f.lon=Math.ceil(f.lon/i)*i;for(var n;(n=c.locationPoint(f).x)<=a.x;f.lon+=i){h||(h=l.appendChild(t.svg("line")));h.setAttribute("x1",n);h.setAttribute("x2",n);h.setAttribute("y1",0);h.setAttribute("y2",a.y);h=h.nextSibling}for(;(n=c.locationPoint(f).y)<=a.y;f.lat-=i){h||
(h=l.appendChild(t.svg("line")));h.setAttribute("y1",n);h.setAttribute("y2",n);h.setAttribute("x1",0);h.setAttribute("x2",a.x);h=h.nextSibling}for(;h;){a=h.nextSibling;l.removeChild(h);h=a}}var g={},c,l=t.svg("g");l.setAttribute("class","grid");g.map=function(h){if(!arguments.length)return c;if(c){l.parentNode.removeChild(l);c.off("move",d).off("resize",d)}if(c=h){c.on("move",d).on("resize",d);c.container().appendChild(l);c.dispatch({type:"move"})}return g};return g};t.stylist=function(){function d(h){var a=
h.features.length,f=g.length,i=c.length,n,o,m,j,u,y;for(u=0;u<a;++u)if(o=(n=h.features[u]).element){n=n.data;for(y=0;y<f;++y){j=(m=g[y]).value;if(typeof j==="function")j=j.call(null,n);j==null?m.name.local?o.removeAttributeNS(m.name.space,m.name.local):o.removeAttribute(m.name):m.name.local?o.setAttributeNS(m.name.space,m.name.local,j):o.setAttribute(m.name,j)}for(y=0;y<i;++y){j=(m=c[y]).value;if(typeof j==="function")j=j.call(null,n);j==null?o.style.removeProperty(m.name):o.style.setProperty(m.name,
j,m.priority)}if(j=l){if(typeof j==="function")j=j.call(null,n);for(;o.lastChild;)o.removeChild(o.lastChild);j!=null&&o.appendChild(t.svg("title")).appendChild(document.createTextNode(j))}}}var g=[],c=[],l;d.attr=function(h,a){g.push({name:fa(h),value:a});return d};d.style=function(h,a,f){c.push({name:h,value:a,priority:arguments.length<3?null:f});return d};d.title=function(h){l=h;return d};return d}})(org.polymaps);
