if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function fa(d){var g=d.indexOf(":");return g<0?d:{space:s.ns[d.substring(0,g)],local:d.substring(g+1)}}function R(){for(var d=0;d<R.maps.length;d++)R.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function $(d,g){if(d.row>g.row){var c=d;d=g;g=c}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ca(d,g,c,k,h){c=Math.max(c,Math.floor(g.y0));
k=Math.min(k,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var a=d;d=g;g=a}a=d.dx/d.dy;var f=g.dx/g.dy,i=d.dx>0,n=g.dx<0;for(c=c;c<k;c++){var q=a*Math.max(0,Math.min(d.dy,c+i-d.y0))+d.x0;h(Math.floor(f*Math.max(0,Math.min(g.dy,c+n-g.y0))+g.x0),Math.ceil(q),c)}}function da(d,g,c,k,h,a){var f=$(d,g);g=$(g,c);d=$(c,d);if(f.dy>g.dy){c=f;f=g;g=c}if(f.dy>d.dy){c=f;f=d;d=c}if(g.dy>d.dy){c=g;g=d;d=c}f.dy&&ca(d,f,k,h,a);g.dy&&ca(d,g,k,h,a)}s.version="2.4.0";
var Z={x:0,y:0};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,d)};s.transform=function(d,g,c,k,h,a){var f={},i,n,q;if(!arguments.length){d=1;g=h=c=0;k=1;a=0}f.zoomFraction=function(m){if(!arguments.length)return n;n=m;i=Math.floor(n+Math.log(Math.sqrt(d*d+g*g+c*c+k*k))/Math.log(2));q=Math.pow(2,-i);return f};f.apply=function(m){var j=Math.pow(2,-m.zoom),
t=Math.pow(2,m.zoom-i);return{column:(d*m.column*j+c*m.row*j+h)*t,row:(g*m.column*j+k*m.row*j+a)*t,zoom:m.zoom-i}};f.unapply=function(m){var j=Math.pow(2,-m.zoom),t=Math.pow(2,m.zoom+i);return{column:(m.column*j*k-m.row*j*c-h*k+a*c)/(d*k-g*c)*t,row:(m.column*j*g-m.row*j*d-h*g+a*d)/(c*g-k*d)*t,zoom:m.zoom+i}};f.toString=function(){return"matrix("+[d*q,g*q,c*q,k*q].join(" ")+" 0 0)"};return f.zoomFraction(0)};s.cache=function(d,g){function c(j){m--;g&&g(j);delete f[j.key];if(j.next)j.next.prev=j.prev;
else if(n=j.prev)n.next=null;if(j.prev)j.prev.next=j.next;else if(i=j.next)i.prev=null}function k(){for(var j=n;m>q;j=j.prev){if(!j)break;j.lock||c(j)}}var h={},a={},f={},i=null,n=null,q=64,m=0;h.peek=function(j){return f[[j.zoom,j.column,j.row].join("/")]};h.load=function(j,t){var y=[j.zoom,j.column,j.row].join("/"),A=f[y];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else n=A.prev;A.prev=null;A.next=i;i=i.prev=A}A.lock=1;return a[y]=A}A={key:y,column:j.column,row:j.row,zoom:j.zoom,next:i,
prev:null,lock:1};d.call(null,A,t);a[y]=f[y]=A;if(i)i.prev=A;else n=A;i=A;m++;return A};h.unload=function(j){if(!(j in a))return false;var t=a[j];t.lock=0;delete a[j];t.request&&t.request.abort(false)&&c(t);return t};h.locks=function(){return a};h.size=function(j){if(!arguments.length)return q;q=j;k();return h};h.flush=function(){k();return h};h.clear=function(){for(var j in f){var t=f[j];t.request&&t.request.abort(false);g&&g(f[j]);if(t.lock){t.lock=0;t.element.parentNode.removeChild(t.element)}}a=
{};f={};i=n=null;m=0;return h};return h};s.url=function(d){function g(k){var h=k.zoom<0?1:1<<k.zoom,a=k.column%h;if(a<0)a+=h;return d.replace(/{(.)}/g,function(f,i){switch(i){case "S":return c[(Math.abs(k.zoom)+k.row+a)%c.length];case "Z":return k.zoom;case "X":return a;case "Y":return k.row;case "B":var n=s.map.coordinateLocation({row:k.row,column:a,zoom:k.zoom}),q=s.map.coordinateLocation({row:k.row+1,column:a+1,zoom:k.zoom}),m=Math.ceil(Math.log(k.zoom)/Math.LN2);return q.lat.toFixed(m)+","+n.lon.toFixed(m)+
","+n.lat.toFixed(m)+","+q.lon.toFixed(m)}return i})}var c=[];g.template=function(k){if(!arguments.length)return d;d=k;return g};g.hosts=function(k){if(!arguments.length)return c;c=k;return g};return g};s.dispatch=function(d){var g={};d.on=function(c,k){for(var h=g[c]||(g[c]=[]),a=0;a<h.length;a++)if(h[a].handler==k)return d;h.push({handler:k,on:true});return d};d.off=function(c,k){var h=g[c];if(h)for(var a=0;a<h.length;a++){var f=h[a];if(f.handler==k){f.on=false;h.splice(a,1);break}}return d};return function(c){var k=
g[c.type];if(k){k=k.slice();for(var h=0;h<k.length;h++){var a=k[h];a.on&&a.handler.call(d,c)}}}};s.queue=function(){function d(){if(!(h>=a||!k.length)){h++;k.pop()()}}function g(f){for(var i=0;i<k.length;i++)if(k[i]==f){k.splice(i,1);return true}return false}function c(f,i,n){function q(){m=new XMLHttpRequest;n&&m.overrideMimeType(n);m.open("GET",f,true);m.onreadystatechange=function(){if(m.readyState==4){h--;m.status<300&&i(m);d()}};m.send(null)}var m;k.push(q);d();return{abort:function(j){if(g(q))return true;
if(j&&m){m.abort();return true}return false}}}var k=[],h=0,a=6;return{text:function(f,i,n){return c(f,function(q){q.responseText&&i(q.responseText)},n)},xml:function(f,i){return c(f,function(n){n.responseXML&&i(n.responseXML)},"application/xml")},json:function(f,i){return c(f,function(n){n.responseText&&i(JSON.parse(n.responseText))},"application/json")},image:function(f,i,n){function q(){m=document.createElement("img");m.onerror=function(){h--;d()};m.onload=function(){h--;n(m);d()};m.src=i;f.setAttributeNS(s.ns.xlink,
"href",i)}var m;k.push(q);d();return{abort:function(j){if(g(q))return true;if(j&&m){m.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(t)if(q<t[0])q=t[0];else if(q>t[1])q=t[1];m=q-(q=Math.round(q));j=Math.pow(2,m)}function g(){if(o){var e=45/Math.pow(2,q+m-3),u=Math.max(Math.abs(E*f.x+A*f.y),Math.abs(C*f.x+G*f.y)),r=V(L-u*e/i.y);u=V(l+u*e/i.y);n.lat=Math.max(r,Math.min(u,n.lat));r=Math.max(Math.abs(E*f.y+A*f.x),Math.abs(C*f.y+G*f.x));n.lon=Math.max(o[0].lon-r*e/i.x,Math.min(o[1].lon+
r*e/i.x,n.lon))}}var c={},k,h,a=Z,f=Z,i={x:256,y:256},n={lat:37.76487,lon:-122.41948},q=12,m=0,j=1,t=[1,18],y=0,A=1,E=0,G=1,C=0,L=-180,l=180,o=[{lat:V(L),lon:-Infinity},{lat:V(l),lon:Infinity}];c.locationCoordinate=function(e){e=s.map.locationCoordinate(e);var u=Math.pow(2,q);e.column*=u;e.row*=u;e.zoom+=q;return e};c.coordinateLocation=s.map.coordinateLocation;c.coordinatePoint=function(e,u){var r=Math.pow(2,q-u.zoom),w=Math.pow(2,q-e.zoom),B=(u.column*r-e.column*w)*i.x*j;r=(u.row*r-e.row*w)*i.y*
j;return{x:f.x+A*B-E*r,y:f.y+E*B+A*r}};c.pointCoordinate=function(e,u){var r=Math.pow(2,q-e.zoom),w=(u.x-f.x)/j,B=(u.y-f.y)/j;return{column:e.column*r+(G*w-C*B)/i.x,row:e.row*r+(C*w+G*B)/i.y,zoom:q}};c.locationPoint=function(e){var u=Math.pow(2,q+m-3)/45,r=(e.lon-n.lon)*u*i.x;e=(W(n.lat)-W(e.lat))*u*i.y;return{x:f.x+A*r-E*e,y:f.y+E*r+A*e}};c.pointLocation=function(e){var u=45/Math.pow(2,q+m-3),r=(e.x-f.x)*u;e=(e.y-f.y)*u;return{lon:n.lon+(G*r-C*e)/i.x,lat:V(W(n.lat)-(C*r+G*e)/i.y)}};var x=s.svg("rect");
x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");c.container=function(e){if(!arguments.length)return k;k=e;k.setAttribute("class","map");k.appendChild(x);return c.resize()};c.focusableParent=function(){for(var e=k;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};c.mouse=function(e){var u=(k.ownerSVGElement||k).createSVGPoint();if(aa<0&&(window.scrollX||window.scrollY)){var r=document.body.appendChild(s.svg("svg"));r.style.position="absolute";r.style.top=r.style.left=
"0px";var w=r.getScreenCTM();aa=!(w.f||w.e);document.body.removeChild(r)}if(aa){u.x=e.pageX;u.y=e.pageY}else{u.x=e.clientX;u.y=e.clientY}return u.matrixTransform(k.getScreenCTM().inverse())};c.size=function(e){if(!arguments.length)return a;h=e;return c.resize()};c.resize=function(){if(h){a=h;R.remove(c)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};R.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);f={x:a.x/2,y:a.y/2};g();
c.dispatch({type:"resize"});return c};c.tileSize=function(e){if(!arguments.length)return i;i=e;c.dispatch({type:"move"});return c};c.center=function(e){if(!arguments.length)return n;n=e;g();c.dispatch({type:"move"});return c};c.panBy=function(e){var u=45/Math.pow(2,q+m-3),r=e.x*u;e=e.y*u;return c.center({lon:n.lon+(C*e-G*r)/i.x,lat:V(W(n.lat)+(C*r+G*e)/i.y)})};c.centerRange=function(e){if(!arguments.length)return o;if(o=e){L=o[0].lat>-90?W(o[0].lat):-Infinity;l=o[0].lat<90?W(o[1].lat):Infinity}else{L=
-Infinity;l=Infinity}g();c.dispatch({type:"move"});return c};c.zoom=function(e){if(!arguments.length)return q+m;q=e;d();return c.center(n)};c.zoomBy=function(e,u,r){if(arguments.length<2)return c.zoom(q+m+e);if(arguments.length<3)r=c.pointLocation(u);q=q+m+e;d();var w=c.locationPoint(r);return c.panBy({x:u.x-w.x,y:u.y-w.y})};c.zoomRange=function(e){if(!arguments.length)return t;t=e;return c.zoom(q+m)};c.extent=function(e){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,
y:0})];var u=c.locationPoint(e[0]),r=c.locationPoint(e[1]),w=Math.max((r.x-u.x)/a.x,(u.y-r.y)/a.y);u=c.pointLocation({x:(u.x+r.x)/2,y:(u.y+r.y)/2});q=q+m-Math.log(w)/Math.log(2);d();return c.center(u)};c.angle=function(e){if(!arguments.length)return y;y=e;A=Math.cos(y);E=Math.sin(y);G=Math.cos(-y);C=Math.sin(-y);g();c.dispatch({type:"move"});return c};c.add=function(e){e.map(c);return c};c.remove=function(e){e.map(null);return c};c.dispatch=s.dispatch(c);return c};R.maps=[];R.add=function(d){for(var g=
0;g<R.maps.length;g++)if(R.maps[g]==d)return;R.maps.push(d)};R.remove=function(d){for(var g=0;g<R.maps.length;g++)if(R.maps[g]==d){R.maps.splice(g,1);return}};window.addEventListener("resize",R,false);s.map.locationCoordinate=function(d){var g=1/360;return{column:(d.lon+180)*g,row:(180-W(d.lat))*g,zoom:0}};s.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:V(180-g*d.row)}};var aa=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(d,g){function c(C){for(var L=
E[0].nextSibling;A<C;A++){t.insertBefore(E[-4],L);t.insertBefore(E[2],L);t.insertBefore(E[1],L);for(var l=E[-4],o=-4;o<2;)E[o]=E[++o];E[o]=l}}function k(C){for(var L=E[0].nextSibling;A>C;A--){t.insertBefore(E[-1],L);t.insertBefore(E[2],E[-4]);for(var l=E[2],o=2;o>-4;)E[o]=E[--o];E[o]=l}}function h(){function C(I){var Q=I.zoom,T=Q<0?1:1<<Q,X=I.column%T,ga=I.row;if(X<0)X+=T;return{locationPoint:function(Y){Y=s.map.locationCoordinate(Y);var ea=Math.pow(2,Q-Y.zoom);return{x:r.x*(ea*Y.column-X),y:r.y*
(ea*Y.row-ga)}}}}function L(I,Q,T){for(I=I;I<Q;I++)J.push({column:I,row:T,zoom:B})}var l=a.map(),o=l.zoom(),x=o-(o=Math.round(o)),e=l.size(),u=l.angle(),r=l.tileSize(),w=l.locationCoordinate(l.center());if(A!=o){if(A<o)c(o);else if(A>o)k(o);else A=o;for(var B=-4;B<=2;B++){var F=E[B];F.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(o+B));F.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}t.setAttribute("transform","translate("+e.x/2+","+e.y/2+")"+(u?"rotate("+u/Math.PI*180+")":"")+(x?"scale("+
Math.pow(2,x)+")":"")+(y?y.zoomFraction(x):""));var H=l.pointCoordinate(w,Z),O=l.pointCoordinate(w,{x:e.x,y:0});F=l.pointCoordinate(w,e);var N=l.pointCoordinate(w,{x:0,y:e.y});if(!x&&!u&&!y){w.column=(Math.round(r.x*w.column)+(e.x&1)/2)/r.x;w.row=(Math.round(r.y*w.row)+(e.y&1)/2)/r.y}if(y){H=y.unapply(H);O=y.unapply(O);F=y.unapply(F);N=y.unapply(N);w=y.unapply(w)}var z=q?q(H.zoom)-H.zoom:0;if(z){o=Math.pow(2,z);H.column*=o;H.row*=o;O.column*=o;O.row*=o;F.column*=o;F.row*=o;N.column*=o;N.row*=o;H.zoom=
O.zoom=F.zoom=N.zoom+=z}x=f.locks();e={};for(var P in x)x[P].proxyCount=0;var J=[];B=H.zoom;u=2-z;l=4+z;if(n&&z>-5&&z<3){o=H.zoom<0?1:1<<H.zoom;if(i){da(H,O,F,0,o,L);da(F,N,H,0,o,L)}else{F=Math.floor((H.column+F.column)/2);O=Math.max(0,Math.min(o-1,Math.floor((O.row+N.row)/2)));B=Math.min(4,H.zoom);F=F>>B<<B;O=O>>B<<B;L(F,F+1,O)}}J.sort(function(I,Q){return Math.abs(I.row-w.row)+Math.abs(I.column-w.column)-(Math.abs(Q.row-w.row)+Math.abs(Q.column-w.column))});H=0;for(N=J.length;H<N;H++){o=J[H];z=
f.load(o,C);if(!z.ready&&!(z.key in e)){F=o.column;O=o.row;z.proxyRefs={};for(var S,U,v,D=1;D<=u;D++){U=true;var M=0;for(o=1<<D;M<=o;M++)for(var K=0;K<=o;K++)if((v=f.peek(S={column:(F<<D)+K,row:(O<<D)+M,zoom:B+D}))&&v.ready){e[v.key]=f.load(S);v.proxyCount++;z.proxyRefs[v.key]=v}else U=false;if(U)break}if(!U)for(D=1;D<=l;D++)if((v=f.peek(S={column:F>>D,row:O>>D,zoom:B-D}))&&v.ready){e[v.key]=f.load(S);v.proxyCount++;z.proxyRefs[v.key]=v;break}}e[z.key]=z}for(P in e){z=e[P];o=Math.pow(2,z.level=z.zoom-
w.zoom);z.element.setAttribute("transform","translate("+(z.x=r.x*(z.column-w.column*o))+","+(z.y=r.y*(z.row-w.row*o))+")")}for(P in x)if(!(P in e)){z=f.unload(P);z.element.parentNode.removeChild(z.element);delete z.proxyRefs}for(P in e){z=e[P];if(z.element.parentNode!=E[z.level]){E[z.level].appendChild(z.element);a.show&&a.show(z)}}f.flush();a.dispatch({type:"move"})}var a={},f=a.cache=s.cache(d,g).size(512),i=true,n=true,q,m,j,t=s.svg("g"),y,A,E={};t.setAttribute("class","layer");for(var G=-4;G<=
-1;G++)E[G]=t.appendChild(s.svg("g"));for(G=2;G>=1;G--)E[G]=t.appendChild(s.svg("g"));E[0]=t.appendChild(s.svg("g"));a.map=function(C){if(!arguments.length)return j;if(j){if(j==C){t.parentNode.appendChild(t);return a}j.off("move",h).off("resize",h);t.parentNode.removeChild(t)}if(j=C){j.container().appendChild(t);a.init&&a.init(t);j.on("move",h).on("resize",h);h()}return a};a.container=function(){return t};a.levels=function(){return E};a.id=function(C){if(!arguments.length)return m;m=C;t.setAttribute("id",
C);return a};a.visible=function(C){if(!arguments.length)return n;(n=C)?t.removeAttribute("visibility"):t.setAttribute("visibility","hidden");j&&h();return a};a.transform=function(C){if(!arguments.length)return y;y=C;j&&h();return a};a.zoom=function(C){if(!arguments.length)return q;q=typeof C=="function"||C==null?C:function(){return C};j&&h();return a};a.tile=function(C){if(!arguments.length)return i;i=C;j&&h();return a};a.reload=function(){f.clear();j&&h();return a};a.dispatch=s.dispatch(a);a.on("load",
function(C){if(C.tile.proxyRefs){for(var L in C.tile.proxyRefs){var l=C.tile.proxyRefs[L];--l.proxyCount<=0&&f.unload(L)&&l.element.parentNode.removeChild(l.element)}delete C.tile.proxyRefs}});return a};s.image=function(){var d=s.layer(function(c){var k=c.element=s.svg("image"),h=d.map().tileSize();k.setAttribute("preserveAspectRatio","none");k.setAttribute("width",h.x);k.setAttribute("height",h.y);if(typeof g=="function"){k.setAttribute("opacity",0);c.request=s.queue.image(k,g(c),function(a){delete c.request;
c.ready=true;c.img=a;k.removeAttribute("opacity");d.dispatch({type:"load",tile:c})})}else{c.ready=true;g&&k.setAttributeNS(s.ns.xlink,"href",g);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),g;d.url=function(c){if(!arguments.length)return g;g=typeof c=="string"&&/{.}/.test(c)?s.url(c):c;return d.reload()};return d};s.geoJson=function(d){function g(l){var o={lat:0,lon:0};return function(x){o.lat=x[1];o.lon=x[0];var e=l(o);x.x=e.x;x.y=e.y;return e}}function c(l,o){return l&&
l.type in E&&E[l.type](l,o)}function k(l,o,x){return l.type in G&&G[l.type](l,o,x)}function h(){var l=a.map().zoom(),o=a.cache.locks(),x,e,u,r,w,B,F;if(y=="fixed")for(x in o){if((e=o[x]).scale!=l){F="scale("+Math.pow(2,e.zoom-l)+")";r=-1;for(w=(u=e.features).length;++r<w;)k((B=u[r]).data.geometry,B.element,F);e.scale=l}}else for(x in o){r=-1;for(w=(u=(e=o[x]).features).length;++r<w;)k((B=u[r]).data.geometry,B.element,"");delete e.scale}}var a=s.layer(function(l,o){function x(u){var r=[];if(u.next)l.request=
d(u.next.href,x);switch(u.type){case "FeatureCollection":for(var w=0;w<u.features.length;w++){var B=u.features[w],F=c(B.geometry,o);F&&r.push({element:e.appendChild(F),data:B})}break;case "Feature":(F=c(u.geometry,o))&&r.push({element:e.appendChild(F),data:u});break;default:(F=c(u,o))&&r.push({element:e.appendChild(F),data:{type:"Feature",geometry:u}});break}l.ready=true;r.push.apply(l.features,r);a.dispatch({type:"load",tile:l,features:r})}var e=l.element=s.svg("g");l.features=[];o=g(o(l).locationPoint);
if(i!=null)l.request=d(typeof i=="function"?i(l):i,x);else x({type:"FeatureCollection",features:A||[]})},function(l){l.request&&l.request.abort(true)}),f=a.container(),i,n=true,q="org.polymaps."+s.id(),m="url(#"+q+")",j=f.insertBefore(s.svg("clipPath"),f.firstChild),t=j.appendChild(s.svg("rect")),y="auto",A;f.setAttribute("fill-rule","evenodd");j.setAttribute("id",q);if(!arguments.length)d=s.queue.json;var E={Point:function(l,o){var x=o(l.coordinates),e=s.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform",
"translate("+x.x+","+x.y+")");return e},MultiPoint:function(l,o){for(var x=s.svg("g"),e=l.coordinates,u,r,w=-1,B=e.length;++w<B;){r=x.appendChild(s.svg("circle"));r.setAttribute("r",4.5);r.setAttribute("transform","translate("+(u=o(e[w])).x+","+u.y+")")}return x},LineString:function(l,o){for(var x=s.svg("path"),e=["M"],u=l.coordinates,r,w=-1,B=u.length;++w<B;)e.push((r=o(u[w])).x,",",r.y,"L");e.pop();if(e.length){x.setAttribute("d",e.join(""));return x}},MultiLineString:function(l,o){for(var x=s.svg("path"),
e=[],u=l.coordinates,r,w=-1,B,F=u.length,H;++w<F;){r=u[w];B=-1;H=r.length;for(e.push("M");++B<H;)e.push((p=o(r[B])).x,",",p.y,"L");e.pop()}if(e.length){x.setAttribute("d",e.join(""));return x}},Polygon:function(l,o){for(var x=s.svg("path"),e=[],u=l.coordinates,r,w=-1,B,F=u.length,H;++w<F;){r=u[w];B=-1;H=r.length-1;for(e.push("M");++B<H;)e.push((p=o(r[B])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){x.setAttribute("d",e.join(""));return x}},MultiPolygon:function(l,o){for(var x=s.svg("path"),e=[],
u=l.coordinates,r,w,B=-1,F,H,O=u.length,N,z;++B<O;){r=u[B];F=-1;for(N=r.length;++F<N;){w=r[F];H=-1;z=w.length-1;for(e.push("M");++H<z;)e.push((p=o(w[H])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){x.setAttribute("d",e.join(""));return x}},GeometryCollection:function(l,o){for(var x=s.svg("g"),e=-1,u=l.geometries,r=u.length,w;++e<r;)(w=c(u[e],o))&&x.appendChild(w);return x}},G={Point:function(l,o,x){l=l.coordinates;o.setAttribute("transform","translate("+l.x+","+l.y+")"+x)},MultiPoint:function(l,
o,x){l=l.coordinates;var e=-1,u=r.length;o=o.firstChild;for(var r;++e<u;){r=l[e];o.setAttribute("transform","translate("+r.x+","+r.y+")"+x);o=o.nextSibling}}};a.url=function(l){if(!arguments.length)return i;i=typeof l=="string"&&/{.}/.test(l)?s.url(l):l;if(i!=null)A=null;typeof i=="string"&&a.tile(false);return a.reload()};a.features=function(l){if(!arguments.length)return A;if(A=l){i=null;a.tile(false)}return a.reload()};a.clip=function(l){if(!arguments.length)return n;n&&f.removeChild(j);if(n=l)f.insertBefore(j,
f.firstChild);var o=a.cache.locks();for(var x in o)n?o[x].element.setAttribute("clip-path",m):o[x].element.removeAttribute("clip-path");return a};var C=a.tile;a.tile=function(l){arguments.length&&!l&&a.clip(l);return C.apply(a,arguments)};var L=a.map;a.map=function(l){if(l&&t){var o=l.tileSize();t.setAttribute("width",o.x);t.setAttribute("height",o.y)}return L.apply(a,arguments)};a.scale=function(l){if(!arguments.length)return y;(y=l)?a.on("move",h):a.off("move",h);a.map()&&h();return a};a.show=function(l){n?
l.element.setAttribute("clip-path",m):l.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:l,features:l.features});return a};a.reshow=function(){var l=a.cache.locks();for(var o in l)a.show(l[o]);return a};return a};s.dblclick=function(){function d(a){var f=k.zoom();f=a.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);c==="mouse"?k.zoomBy(f,k.mouse(a)):k.zoomBy(f)}var g={},c="mouse",k,h;g.zoom=function(a){if(!arguments.length)return c;c=a;return g};g.map=function(a){if(!arguments.length)return k;
if(k){h.removeEventListener("dblclick",d,false);h=null}if(k=a){h=k.container();h.addEventListener("dblclick",d,false)}return g};return g};s.drag=function(){function d(f){if(!f.shiftKey){a={x:f.clientX,y:f.clientY};k.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(a){k.panBy({x:f.clientX-a.x,y:f.clientY-a.y});a.x=f.clientX;a.y=f.clientY}}var c={},k,h,a;c.map=function(f){if(!arguments.length)return k;if(k){h.removeEventListener("mousedown",
d,false);h=null}if(k=f){h=k.container();h.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(a){g(f);a=null;document.body.style.removeProperty("cursor")}},false);return c};s.touch=function(){function d(i){f&&c();i.preventDefault();f=k(i)}function g(i){if(!f)return d(i);i.preventDefault();i=k(i);var n={x:i.clientX-f.clientX,y:i.clientY-f.clientY,scale:i.scale-f.scale};if(n.x||n.y||n.scale){var q=a.mouse(f);q=
a.pointLocation(q);a.zoomBy(n.scale,a.mouse(i),q)}f=i}function c(){f=null}function k(i){for(var n=i.touches,q=0,m=0,j=0;j<n.length;++j){var t=n[j];q+=t.clientX;m+=t.clientY}return{clientX:q/n.length,pageX:q/n.length,clientY:m/n.length,pageY:m/n.length,scale:i.scale}}var h={},a,f;h.map=function(i){if(!arguments.length)return a;if(a){var n=a.container();n.removeEventListener("touchstart",d,false);n.removeEventListener("touchmove",g,false);n.removeEventListener("touchend",c,false);n.removeEventListener("touchcancel",
c,false)}if(a=i){n=a.container();n.addEventListener("touchstart",d,false);n.addEventListener("touchmove",g,false);n.addEventListener("touchend",c,false);n.addEventListener("touchcancel",c,false)}return h};return h};s.wheel=function(){function d(){i=null}function g(m){var j=(m.wheelDelta/120||-m.detail)*0.1,t;if(ba<0){t=Date.now();var y=t-h;if(y>9&&Math.abs(m.wheelDelta)/y>=50)ba=1;h=t}if(ba==1)j*=0.03;if(!a&&j){t=Date.now();if(t-k>200){j=j>0?+1:-1;k=t}else j=0}if(j)switch(f){case "mouse":t=n.mouse(m);
i||(i=n.pointLocation(t));n.off("move",d).zoomBy(j,t,i).on("move",d);break;case "location":n.zoomBy(j,n.locationPoint(i),i);break;default:n.zoomBy(j);break}m.preventDefault();return false}var c={},k=0,h=0,a=true,f="mouse",i,n,q;c.smooth=function(m){if(!arguments.length)return a;a=m;return c};c.zoom=function(m,j){if(!arguments.length)return f;f=m;i=j;if(n)f=="mouse"?n.on("move",d):n.off("move",d);return c};c.map=function(m){if(!arguments.length)return n;if(n){q.removeEventListener("mousemove",d,false);
q.removeEventListener("mousewheel",g,false);q.removeEventListener("DOMMouseScroll",g,false);q=null;n.off("move",d)}if(n=m){f=="mouse"&&n.on("move",d);q=n.container();q.addEventListener("mousemove",d,false);q.addEventListener("mousewheel",g,false);q.addEventListener("DOMMouseScroll",g,false)}return c};return c};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function d(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var A=Date.now(),E=0,G=0;switch(y.keyCode){case 37:if(!a.left){f=A;
a.left=1;a.right||(E=m)}break;case 39:if(!a.right){f=A;a.right=1;a.left||(E=-m)}break;case 38:if(!a.up){f=A;a.up=1;a.down||(G=m)}break;case 40:if(!a.down){f=A;a.down=1;a.up||(G=-m)}break;default:return}if(E||G)j.panBy({x:E,y:G});if(!i&&a.left|a.right|a.up|a.down)i=setInterval(k,q);y.preventDefault()}}function g(y){f=Date.now();switch(y.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(i&&!(a.left|a.right|a.up|a.down))i=clearInterval(i);
y.preventDefault()}function c(y){switch(y.charCode){case 45:case 95:j.zoom(Math.ceil(j.zoom())-1);break;case 43:case 61:j.zoom(Math.floor(j.zoom())+1);break;default:return}y.preventDefault()}function k(){if(j)if(!(Date.now()<f+n)){var y=(a.left-a.right)*m,A=(a.up-a.down)*m;if(y||A)j.panBy({x:y,y:A})}}var h={},a={left:0,right:0,up:0,down:0},f=0,i,n=250,q=50,m=16,j,t;h.map=function(y){if(!arguments.length)return j;if(j){t.removeEventListener("keypress",c,false);t.removeEventListener("keydown",d,false);
t.removeEventListener("keyup",g,false);t=null}if(j=y){t=j.focusableParent();t.addEventListener("keypress",c,false);t.addEventListener("keydown",d,false);t.addEventListener("keyup",g,false)}return h};h.speed=function(y){if(!arguments.length)return m;m=y;return h};return h};s.hash=function(){function d(){var i=f(h);if(k!==i)location.replace(k=i)}function g(){if(location.hash!==k)if(a(h,(k=location.hash).substring(1)))d()}var c={},k,h,a=function(i,n){var q=n.split("/").map(Number);if(q.length<3||q.some(isNaN))return true;
else{var m=i.size();i.zoomBy(q[0]-i.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,q[1])),lon:q[2]})}},f=function(i){var n=i.center();i=i.zoom();var q=Math.max(0,Math.ceil(Math.log(i)/Math.LN2));return"#"+i.toFixed(2)+"/"+n.lat.toFixed(q)+"/"+n.lon.toFixed(q)};c.map=function(i){if(!arguments.length)return h;if(h){h.off("move",d);window.removeEventListener("hashchange",g,false)}if(h=i){h.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return c};
c.parser=function(i){if(!arguments.length)return a;a=i;return c};c.formatter=function(i){if(!arguments.length)return f;f=i;return c};return c};s.interact=function(){var d={},g=s.drag(),c=s.wheel(),k=s.dblclick(),h=s.arrow();d.map=function(a){g.map(a);c.map(a);k.map(a);h.map(a);return d};return d};s.compass=function(){function d(v){C.setAttribute("class","compass active");H||(H=setInterval(g,u));O&&J.panBy(O);x=Date.now();return m(v)}function g(){O&&Date.now()>x+e&&J.panBy(O)}function c(v){if(v.shiftKey){z=
{x0:J.mouse(v)};J.focusableParent().focus();return m(v)}}function k(v){if(z){z.x1=J.mouse(v);P.setAttribute("x",Math.min(z.x0.x,z.x1.x));P.setAttribute("y",Math.min(z.x0.y,z.x1.y));P.setAttribute("width",Math.abs(z.x0.x-z.x1.x));P.setAttribute("height",Math.abs(z.x0.y-z.x1.y));P.removeAttribute("display")}}function h(){C.setAttribute("class","compass");if(z){if(z.x1){J.extent([J.pointLocation({x:Math.min(z.x0.x,z.x1.x),y:Math.max(z.x0.y,z.x1.y)}),J.pointLocation({x:Math.max(z.x0.x,z.x1.x),y:Math.min(z.x0.y,
z.x1.y)})]);P.setAttribute("display","none")}z=null}if(H){clearInterval(H);H=0}}function a(v){return function(){v?this.setAttribute("class","active"):this.removeAttribute("class");O=v}}function f(v){return function(D){C.setAttribute("class","compass active");var M=J.zoom();J.zoom(v<0?Math.ceil(M)-1:Math.floor(M)+1);return m(D)}}function i(v){return function(D){J.zoom(v);return m(D)}}function n(){this.setAttribute("class","active")}function q(){this.removeAttribute("class")}function m(v){v.stopPropagation();
v.preventDefault();return false}function j(v){var D=Math.SQRT1_2*l,M=l*0.7,K=l*0.2,I=s.svg("g"),Q=I.appendChild(s.svg("path")),T=I.appendChild(s.svg("path"));Q.setAttribute("class","direction");Q.setAttribute("pointer-events","all");Q.setAttribute("d","M0,0L"+D+","+D+"A"+l+","+l+" 0 0,1 "+-D+","+D+"Z");T.setAttribute("class","chevron");T.setAttribute("d","M"+K+","+(M-K)+"L0,"+M+" "+-K+","+(M-K));T.setAttribute("pointer-events","none");I.addEventListener("mousedown",d,false);I.addEventListener("mouseover",
a(v),false);I.addEventListener("mouseout",a(null),false);I.addEventListener("dblclick",m,false);return I}function t(v){var D=l*0.4,M=D/2,K=s.svg("g"),I=K.appendChild(s.svg("path")),Q=K.appendChild(s.svg("path")),T=K.appendChild(s.svg("path")),X=K.appendChild(s.svg("path"));I.setAttribute("class","back");I.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");Q.setAttribute("class","direction");Q.setAttribute("d",I.getAttribute("d"));T.setAttribute("class","chevron");T.setAttribute("d",
"M"+-M+","+-D+"H"+M+(v>0?"M0,"+(-D-M)+"V"+-M:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",I.getAttribute("d"));K.addEventListener("mousedown",f(v),false);K.addEventListener("mouseover",n,false);K.addEventListener("mouseout",q,false);K.addEventListener("dblclick",m,false);return K}function y(v){var D=l*0.2,M=l*0.4,K=s.svg("g"),I=K.appendChild(s.svg("rect")),Q=K.appendChild(s.svg("path"));I.setAttribute("pointer-events","all");I.setAttribute("fill","none");I.setAttribute("x",
-M);I.setAttribute("y",-0.75*M);I.setAttribute("width",2*M);I.setAttribute("height",1.5*M);Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-D+",0H"+D);K.addEventListener("mousedown",i(v),false);K.addEventListener("dblclick",m,false);return K}function A(){var v=l+6,D=v,M=J.size();switch(r){case "top-left":break;case "top-right":v=M.x-v;break;case "bottom-left":D=M.y-D;break;case "bottom-right":v=M.x-v;D=M.y-D;break}v="translate("+v+","+D+")";N&&N.setAttribute("transform",v);B&&B.setAttribute("transform",
v);for(var K in L)K==J.zoom()?L[K].setAttribute("class","active"):L[K].removeAttribute("class")}function E(){for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(P);if(F!="none"){N=C.appendChild(s.svg("g"));N.setAttribute("class","pan");var v=N.appendChild(s.svg("circle"));v.setAttribute("class","back");v.setAttribute("r",l);N.appendChild(j({x:0,y:-o})).setAttribute("transform","rotate(0)");N.appendChild(j({x:o,y:0})).setAttribute("transform","rotate(90)");N.appendChild(j({x:0,y:o})).setAttribute("transform",
"rotate(180)");N.appendChild(j({x:-o,y:0})).setAttribute("transform","rotate(270)");v=N.appendChild(s.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",l)}else N=null;if(w!="none"){B=C.appendChild(s.svg("g"));B.setAttribute("class","zoom");v=-0.5;if(w=="big"){L={};var D=J.zoomRange()[0];for(v=0;D<=J.zoomRange()[1];D++,v++)(L[D]=B.appendChild(y(D))).setAttribute("transform","translate(0,"+-(v+0.75)*l*0.4+")")}D=F=="none"?0.4:2;B.setAttribute("transform",
"translate(0,"+l*(/^top-/.test(r)?D+(v+0.5)*0.4:-D)+")");B.appendChild(t(+1)).setAttribute("transform","translate(0,"+-(v+0.5)*l*0.4+")");B.appendChild(t(-1)).setAttribute("transform","scale(-1)")}else B=null;A()}var G={},C=s.svg("g"),L={},l=30,o=16,x=0,e=250,u=50,r="top-left",w="small",B,F="small",H,O,N,z,P=s.svg("rect"),J,S,U;C.setAttribute("class","compass");P.setAttribute("class","back fore");P.setAttribute("pointer-events","none");P.setAttribute("display","none");G.radius=function(v){if(!arguments.length)return l;
l=v;J&&E();return G};G.speed=function(v){if(!arguments.length)return l;o=v;return G};G.position=function(v){if(!arguments.length)return r;r=v;J&&E();return G};G.pan=function(v){if(!arguments.length)return F;F=v;J&&E();return G};G.zoom=function(v){if(!arguments.length)return w;w=v;J&&E();return G};G.map=function(v){if(!arguments.length)return J;if(J){S.removeEventListener("mousedown",c,false);S.removeChild(C);S=null;U.removeEventListener("mousemove",k,false);U.removeEventListener("mouseup",h,false);
U=null;J.off("move",A).off("resize",A)}if(J=v){S=J.container();S.appendChild(C);S.addEventListener("mousedown",c,false);U=S.ownerDocument.defaultView;U.addEventListener("mousemove",k,false);U.addEventListener("mouseup",h,false);J.on("move",A).on("resize",A);E()}return G};return G};s.grid=function(){function d(){var h=k.firstChild,a=c.size(),f=c.pointLocation(Z);c.pointLocation(a);var i=Math.pow(2,4-Math.round(c.zoom()));f.lat=Math.floor(f.lat/i)*i;f.lon=Math.ceil(f.lon/i)*i;for(var n;(n=c.locationPoint(f).x)<=
a.x;f.lon+=i){h||(h=k.appendChild(s.svg("line")));h.setAttribute("x1",n);h.setAttribute("x2",n);h.setAttribute("y1",0);h.setAttribute("y2",a.y);h=h.nextSibling}for(;(n=c.locationPoint(f).y)<=a.y;f.lat-=i){h||(h=k.appendChild(s.svg("line")));h.setAttribute("y1",n);h.setAttribute("y2",n);h.setAttribute("x1",0);h.setAttribute("x2",a.x);h=h.nextSibling}for(;h;){a=h.nextSibling;k.removeChild(h);h=a}}var g={},c,k=s.svg("g");k.setAttribute("class","grid");g.map=function(h){if(!arguments.length)return c;
if(c){k.parentNode.removeChild(k);c.off("move",d).off("resize",d)}if(c=h){c.on("move",d).on("resize",d);c.container().appendChild(k);c.dispatch({type:"move"})}return g};return g};s.stylist=function(){function d(h){var a=h.features.length,f=g.length,i=c.length,n,q,m,j,t,y;for(t=0;t<a;++t)if(q=(n=h.features[t]).element){n=n.data;for(y=0;y<f;++y){j=(m=g[y]).value;if(typeof j==="function")j=j.call(null,n);j==null?m.name.local?q.removeAttributeNS(m.name.space,m.name.local):q.removeAttribute(m.name):m.name.local?
q.setAttributeNS(m.name.space,m.name.local,j):q.setAttribute(m.name,j)}for(y=0;y<i;++y){j=(m=c[y]).value;if(typeof j==="function")j=j.call(null,n);j==null?q.style.removeProperty(m.name):q.style.setProperty(m.name,j,m.priority)}if(j=k){if(typeof j==="function")j=j.call(null,n);for(;q.lastChild;)q.removeChild(q.lastChild);j!=null&&q.appendChild(s.svg("title")).appendChild(document.createTextNode(j))}}}var g=[],c=[],k;d.attr=function(h,a){g.push({name:fa(h),value:a});return d};d.style=function(h,a,f){c.push({name:h,
value:a,priority:arguments.length<3?null:f});return d};d.title=function(h){k=h;return d};return d}})(org.polymaps);
