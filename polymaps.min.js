if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function fa(d){var f=d.indexOf(":");return f<0?d:{space:s.ns[d.substring(0,f)],local:d.substring(f+1)}}function R(){for(var d=0;d<R.maps.length;d++)R.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function $(d,f){if(d.row>f.row){var c=d;d=f;f=c}return{x0:d.column,y0:d.row,x1:f.column,y1:f.row,dx:f.column-d.column,dy:f.row-d.row}}function ca(d,f,c,j,h){c=Math.max(c,Math.floor(f.y0));
j=Math.min(j,Math.ceil(f.y1));if(d.x0==f.x0&&d.y0==f.y0?d.x0+f.dy/d.dy*d.dx<f.x1:d.x1-f.dy/d.dy*d.dx<f.x0){var a=d;d=f;f=a}a=d.dx/d.dy;var g=f.dx/f.dy,l=d.dx>0,o=f.dx<0;for(c=c;c<j;c++){var q=a*Math.max(0,Math.min(d.dy,c+l-d.y0))+d.x0;h(Math.floor(g*Math.max(0,Math.min(f.dy,c+o-f.y0))+f.x0),Math.ceil(q),c)}}function da(d,f,c,j,h,a){var g=$(d,f);f=$(f,c);d=$(c,d);if(g.dy>f.dy){c=g;g=f;f=c}if(g.dy>d.dy){c=g;g=d;d=c}if(f.dy>d.dy){c=f;f=d;d=c}g.dy&&ca(d,g,j,h,a);f.dy&&ca(d,f,j,h,a)}s.version="2.4.0";
var Z={x:0,y:0};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,d)};s.transform=function(d,f,c,j,h,a){var g={},l,o,q;if(!arguments.length){d=1;f=h=c=0;j=1;a=0}g.zoomFraction=function(m){if(!arguments.length)return o;o=m;l=Math.floor(o+Math.log(Math.sqrt(d*d+f*f+c*c+j*j))/Math.log(2));q=Math.pow(2,-l);return g};g.apply=function(m){var i=Math.pow(2,-m.zoom),
u=Math.pow(2,m.zoom-l);return{column:(d*m.column*i+c*m.row*i+h)*u,row:(f*m.column*i+j*m.row*i+a)*u,zoom:m.zoom-l}};g.unapply=function(m){var i=Math.pow(2,-m.zoom),u=Math.pow(2,m.zoom+l);return{column:(m.column*i*j-m.row*i*c-h*j+a*c)/(d*j-f*c)*u,row:(m.column*i*f-m.row*i*d-h*f+a*d)/(c*f-j*d)*u,zoom:m.zoom+l}};g.toString=function(){return"matrix("+[d*q,f*q,c*q,j*q].join(" ")+" 0 0)"};return g.zoomFraction(0)};s.cache=function(d,f){function c(i){m--;f&&f(i);delete g[i.key];if(i.next)i.next.prev=i.prev;
else if(o=i.prev)o.next=null;if(i.prev)i.prev.next=i.next;else if(l=i.next)l.prev=null}function j(){for(var i=o;m>q;i=i.prev){if(!i)break;i.lock||c(i)}}var h={},a={},g={},l=null,o=null,q=64,m=0;h.peek=function(i){return g[[i.zoom,i.column,i.row].join("/")]};h.load=function(i,u){var y=[i.zoom,i.column,i.row].join("/"),A=g[y];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else o=A.prev;A.prev=null;A.next=l;l=l.prev=A}A.lock=1;return a[y]=A}A={key:y,column:i.column,row:i.row,zoom:i.zoom,next:l,
prev:null,lock:1};d.call(null,A,u);a[y]=g[y]=A;if(l)l.prev=A;else o=A;l=A;m++;return A};h.unload=function(i){if(!(i in a))return false;var u=a[i];u.lock=0;delete a[i];u.request&&u.request.abort(false)&&c(u);return u};h.locks=function(){return a};h.size=function(i){if(!arguments.length)return q;q=i;j();return h};h.flush=function(){j();return h};h.clear=function(){for(var i in g){var u=g[i];u.request&&u.request.abort(false);f&&f(g[i]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}a=
{};g={};l=o=null;m=0;return h};return h};s.url=function(d){function f(j){var h=j.zoom<0?1:1<<j.zoom,a=j.column%h;if(a<0)a+=h;return d.replace(/{(.)}/g,function(g,l){switch(l){case "S":return c[(Math.abs(j.zoom)+j.row+a)%c.length];case "Z":return j.zoom;case "X":return a;case "Y":return j.row;case "B":var o=s.map.coordinateLocation({row:j.row,column:a,zoom:j.zoom}),q=s.map.coordinateLocation({row:j.row+1,column:a+1,zoom:j.zoom}),m=Math.ceil(Math.log(j.zoom)/Math.LN2);return q.lat.toFixed(m)+","+o.lon.toFixed(m)+
","+o.lat.toFixed(m)+","+q.lon.toFixed(m)}return l})}var c=[];f.template=function(j){if(!arguments.length)return d;d=j;return f};f.hosts=function(j){if(!arguments.length)return c;c=j;return f};return f};s.dispatch=function(d){var f={};d.on=function(c,j){for(var h=f[c]||(f[c]=[]),a=0;a<h.length;a++)if(h[a].handler==j)return d;h.push({handler:j,on:true});return d};d.off=function(c,j){var h=f[c];if(h)for(var a=0;a<h.length;a++){var g=h[a];if(g.handler==j){g.on=false;h.splice(a,1);break}}return d};return function(c){var j=
f[c.type];if(j){j=j.slice();for(var h=0;h<j.length;h++){var a=j[h];a.on&&a.handler.call(d,c)}}}};s.queue=function(){function d(){if(!(h>=a||!j.length)){h++;j.pop()()}}function f(g){for(var l=0;l<j.length;l++)if(j[l]==g){j.splice(l,1);return true}return false}function c(g,l,o){function q(){m=new XMLHttpRequest;o&&m.overrideMimeType(o);m.open("GET",g,true);m.onreadystatechange=function(){if(m.readyState==4){h--;m.status<300&&l(m);d()}};m.send(null)}var m;j.push(q);d();return{abort:function(i){if(f(q))return true;
if(i&&m){m.abort();return true}return false}}}var j=[],h=0,a=6;return{text:function(g,l,o){return c(g,function(q){q.responseText&&l(q.responseText)},o)},xml:function(g,l){return c(g,function(o){o.responseXML&&l(o.responseXML)},"application/xml")},json:function(g,l){return c(g,function(o){o.responseText&&l(JSON.parse(o.responseText))},"application/json")},image:function(g,l,o){function q(){m=document.createElement("img");m.onerror=function(){h--;d()};m.onload=function(){h--;o(m);d()};m.src=l;g.setAttributeNS(s.ns.xlink,
"href",l)}var m;j.push(q);d();return{abort:function(i){if(f(q))return true;if(i&&m){m.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(u)if(q<u[0])q=u[0];else if(q>u[1])q=u[1];m=q-(q=Math.round(q));i=Math.pow(2,m)}function f(){if(n){var e=45/Math.pow(2,q+m-3),t=Math.max(Math.abs(E*g.x+A*g.y),Math.abs(C*g.x+G*g.y)),r=V(L-t*e/l.y);t=V(k+t*e/l.y);o.lat=Math.max(r,Math.min(t,o.lat));r=Math.max(Math.abs(E*g.y+A*g.x),Math.abs(C*g.y+G*g.x));o.lon=Math.max(n[0].lon-r*e/l.x,Math.min(n[1].lon+
r*e/l.x,o.lon))}}var c={},j,h,a=Z,g=Z,l={x:256,y:256},o={lat:37.76487,lon:-122.41948},q=12,m=0,i=1,u=[1,18],y=0,A=1,E=0,G=1,C=0,L=-180,k=180,n=[{lat:V(L),lon:-Infinity},{lat:V(k),lon:Infinity}];c.locationCoordinate=function(e){e=s.map.locationCoordinate(e);var t=Math.pow(2,q);e.column*=t;e.row*=t;e.zoom+=q;return e};c.coordinateLocation=s.map.coordinateLocation;c.coordinatePoint=function(e,t){var r=Math.pow(2,q-t.zoom),w=Math.pow(2,q-e.zoom),B=(t.column*r-e.column*w)*l.x*i;r=(t.row*r-e.row*w)*l.y*
i;return{x:g.x+A*B-E*r,y:g.y+E*B+A*r}};c.pointCoordinate=function(e,t){var r=Math.pow(2,q-e.zoom),w=(t.x-g.x)/i,B=(t.y-g.y)/i;return{column:e.column*r+(G*w-C*B)/l.x,row:e.row*r+(C*w+G*B)/l.y,zoom:q}};c.locationPoint=function(e){var t=Math.pow(2,q+m-3)/45,r=(e.lon-o.lon)*t*l.x;e=(W(o.lat)-W(e.lat))*t*l.y;return{x:g.x+A*r-E*e,y:g.y+E*r+A*e}};c.pointLocation=function(e){var t=45/Math.pow(2,q+m-3),r=(e.x-g.x)*t;e=(e.y-g.y)*t;return{lon:o.lon+(G*r-C*e)/l.x,lat:V(W(o.lat)-(C*r+G*e)/l.y)}};var x=s.svg("rect");
x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");c.container=function(e){if(!arguments.length)return j;j=e;j.setAttribute("class","map");j.appendChild(x);return c.resize()};c.focusableParent=function(){for(var e=j;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};c.mouse=function(e){var t=(j.ownerSVGElement||j).createSVGPoint();if(aa<0&&(window.scrollX||window.scrollY)){var r=document.body.appendChild(s.svg("svg"));r.style.position="absolute";r.style.top=r.style.left=
"0px";var w=r.getScreenCTM();aa=!(w.f||w.e);document.body.removeChild(r)}if(aa){t.x=e.pageX;t.y=e.pageY}else{t.x=e.clientX;t.y=e.clientY}return t.matrixTransform(j.getScreenCTM().inverse())};c.size=function(e){if(!arguments.length)return a;h=e;return c.resize()};c.resize=function(){if(h){a=h;R.remove(c)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};R.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);g={x:a.x/2,y:a.y/2};f();
c.dispatch({type:"resize"});return c};c.tileSize=function(e){if(!arguments.length)return l;l=e;c.dispatch({type:"move"});return c};c.center=function(e){if(!arguments.length)return o;o=e;f();c.dispatch({type:"move"});return c};c.panBy=function(e){var t=45/Math.pow(2,q+m-3),r=e.x*t;e=e.y*t;return c.center({lon:o.lon+(C*e-G*r)/l.x,lat:V(W(o.lat)+(C*r+G*e)/l.y)})};c.centerRange=function(e){if(!arguments.length)return n;if(n=e){L=n[0].lat>-90?W(n[0].lat):-Infinity;k=n[0].lat<90?W(n[1].lat):Infinity}else{L=
-Infinity;k=Infinity}f();c.dispatch({type:"move"});return c};c.zoom=function(e){if(!arguments.length)return q+m;q=e;d();return c.center(o)};c.zoomBy=function(e,t,r){if(arguments.length<2)return c.zoom(q+m+e);if(arguments.length<3)r=c.pointLocation(t);q=q+m+e;d();var w=c.locationPoint(r);return c.panBy({x:t.x-w.x,y:t.y-w.y})};c.zoomRange=function(e){if(!arguments.length)return u;u=e;return c.zoom(q+m)};c.extent=function(e){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,
y:0})];var t=c.locationPoint(e[0]),r=c.locationPoint(e[1]),w=Math.max((r.x-t.x)/a.x,(t.y-r.y)/a.y);t=c.pointLocation({x:(t.x+r.x)/2,y:(t.y+r.y)/2});q=q+m-Math.log(w)/Math.log(2);d();return c.center(t)};c.angle=function(e){if(!arguments.length)return y;y=e;A=Math.cos(y);E=Math.sin(y);G=Math.cos(-y);C=Math.sin(-y);f();c.dispatch({type:"move"});return c};c.add=function(e){e.map(c);return c};c.remove=function(e){e.map(null);return c};c.dispatch=s.dispatch(c);return c};R.maps=[];R.add=function(d){for(var f=
0;f<R.maps.length;f++)if(R.maps[f]==d)return;R.maps.push(d)};R.remove=function(d){for(var f=0;f<R.maps.length;f++)if(R.maps[f]==d){R.maps.splice(f,1);return}};window.addEventListener("resize",R,false);s.map.locationCoordinate=function(d){var f=1/360;return{column:(d.lon+180)*f,row:(180-W(d.lat))*f,zoom:0}};s.map.coordinateLocation=function(d){var f=45/Math.pow(2,d.zoom-3);return{lon:f*d.column-180,lat:V(180-f*d.row)}};var aa=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(d,f){function c(C){for(var L=
E[0].nextSibling;A<C;A++){u.insertBefore(E[-4],L);u.insertBefore(E[2],L);u.insertBefore(E[1],L);for(var k=E[-4],n=-4;n<2;)E[n]=E[++n];E[n]=k}}function j(C){for(var L=E[0].nextSibling;A>C;A--){u.insertBefore(E[-1],L);u.insertBefore(E[2],E[-4]);for(var k=E[2],n=2;n>-4;)E[n]=E[--n];E[n]=k}}function h(){function C(I){var Q=I.zoom,T=Q<0?1:1<<Q,X=I.column%T,ga=I.row;if(X<0)X+=T;return{locationPoint:function(Y){Y=s.map.locationCoordinate(Y);var ea=Math.pow(2,Q-Y.zoom);return{x:r.x*(ea*Y.column-X),y:r.y*
(ea*Y.row-ga)}}}}function L(I,Q,T){for(I=I;I<Q;I++)J.push({column:I,row:T,zoom:B})}var k=a.map(),n=k.zoom(),x=n-(n=Math.round(n)),e=k.size(),t=k.angle(),r=k.tileSize(),w=k.locationCoordinate(k.center());if(A!=n){if(A<n)c(n);else if(A>n)j(n);else A=n;for(var B=-4;B<=2;B++){var F=E[B];F.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(n+B));F.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}u.setAttribute("transform","translate("+e.x/2+","+e.y/2+")"+(t?"rotate("+t/Math.PI*180+")":"")+(x?"scale("+
Math.pow(2,x)+")":"")+(y?y.zoomFraction(x):""));var H=k.pointCoordinate(w,Z),O=k.pointCoordinate(w,{x:e.x,y:0});F=k.pointCoordinate(w,e);var N=k.pointCoordinate(w,{x:0,y:e.y});if(!x&&!t&&!y){w.column=(Math.round(r.x*w.column)+(e.x&1)/2)/r.x;w.row=(Math.round(r.y*w.row)+(e.y&1)/2)/r.y}if(y){H=y.unapply(H);O=y.unapply(O);F=y.unapply(F);N=y.unapply(N);w=y.unapply(w)}var z=q?q(H.zoom)-H.zoom:0;if(z){n=Math.pow(2,z);H.column*=n;H.row*=n;O.column*=n;O.row*=n;F.column*=n;F.row*=n;N.column*=n;N.row*=n;H.zoom=
O.zoom=F.zoom=N.zoom+=z}x=g.locks();e={};for(var P in x)x[P].proxyCount=0;var J=[];B=H.zoom;t=2-z;k=4+z;if(o&&z>-5&&z<3){n=H.zoom<0?1:1<<H.zoom;if(l){da(H,O,F,0,n,L);da(F,N,H,0,n,L)}else{F=Math.floor((H.column+F.column)/2);O=Math.max(0,Math.min(n-1,Math.floor((O.row+N.row)/2)));B=Math.min(4,H.zoom);F=F>>B<<B;O=O>>B<<B;L(F,F+1,O)}}J.sort(function(I,Q){return Math.abs(I.row-w.row)+Math.abs(I.column-w.column)-(Math.abs(Q.row-w.row)+Math.abs(Q.column-w.column))});H=0;for(N=J.length;H<N;H++){n=J[H];z=
g.load(n,C);if(!z.ready&&!(z.key in e)){F=n.column;O=n.row;z.proxyRefs={};for(var S,U,v,D=1;D<=t;D++){U=true;var M=0;for(n=1<<D;M<=n;M++)for(var K=0;K<=n;K++)if((v=g.peek(S={column:(F<<D)+K,row:(O<<D)+M,zoom:B+D}))&&v.ready){e[v.key]=g.load(S);v.proxyCount++;z.proxyRefs[v.key]=v}else U=false;if(U)break}if(!U)for(D=1;D<=k;D++)if((v=g.peek(S={column:F>>D,row:O>>D,zoom:B-D}))&&v.ready){e[v.key]=g.load(S);v.proxyCount++;z.proxyRefs[v.key]=v;break}}e[z.key]=z}for(P in e){z=e[P];n=Math.pow(2,z.level=z.zoom-
w.zoom);z.element.setAttribute("transform","translate("+(z.x=r.x*(z.column-w.column*n))+","+(z.y=r.y*(z.row-w.row*n))+")")}for(P in x)if(!(P in e)){z=g.unload(P);z.element.parentNode.removeChild(z.element);delete z.proxyRefs}for(P in e){z=e[P];if(z.element.parentNode!=E[z.level]){E[z.level].appendChild(z.element);a.show&&a.show(z)}}g.flush();a.dispatch({type:"move"})}var a={},g=a.cache=s.cache(d,f).size(512),l=true,o=true,q,m,i,u=s.svg("g"),y,A,E={};u.setAttribute("class","layer");for(var G=-4;G<=
-1;G++)E[G]=u.appendChild(s.svg("g"));for(G=2;G>=1;G--)E[G]=u.appendChild(s.svg("g"));E[0]=u.appendChild(s.svg("g"));a.map=function(C){if(!arguments.length)return i;if(i){if(i==C){u.parentNode.appendChild(u);return a}i.off("move",h).off("resize",h);u.parentNode.removeChild(u)}if(i=C){i.container().appendChild(u);a.init&&a.init(u);i.on("move",h).on("resize",h);h()}return a};a.container=function(){return u};a.levels=function(){return E};a.id=function(C){if(!arguments.length)return m;m=C;u.setAttribute("id",
C);return a};a.visible=function(C){if(!arguments.length)return o;(o=C)?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");i&&h();return a};a.transform=function(C){if(!arguments.length)return y;y=C;i&&h();return a};a.zoom=function(C){if(!arguments.length)return q;q=typeof C=="function"||C==null?C:function(){return C};i&&h();return a};a.tile=function(C){if(!arguments.length)return l;l=C;i&&h();return a};a.reload=function(){g.clear();i&&h();return a};a.dispatch=s.dispatch(a);a.on("load",
function(C){if(C.tile.proxyRefs){for(var L in C.tile.proxyRefs){var k=C.tile.proxyRefs[L];--k.proxyCount<=0&&g.unload(L)&&k.element.parentNode.removeChild(k.element)}delete C.tile.proxyRefs}});return a};s.image=function(){var d=s.layer(function(c){var j=c.element=s.svg("image"),h=d.map().tileSize();j.setAttribute("preserveAspectRatio","none");j.setAttribute("width",h.x);j.setAttribute("height",h.y);if(typeof f=="function"){j.setAttribute("opacity",0);c.request=s.queue.image(j,f(c),function(a){delete c.request;
c.ready=true;c.img=a;j.removeAttribute("opacity");d.dispatch({type:"load",tile:c})})}else{c.ready=true;f&&j.setAttributeNS(s.ns.xlink,"href",f);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),f;d.url=function(c){if(!arguments.length)return f;f=typeof c=="string"&&/{.}/.test(c)?s.url(c):c;return d.reload()};return d};s.geoJson=function(d){function f(k){var n={lat:0,lon:0};return function(x){n.lat=x[1];n.lon=x[0];var e=k(n);x.x=e.x;x.y=e.y;return e}}function c(k,n){return k&&
k.type in E&&E[k.type](k,n)}function j(k,n,x){return k.type in G&&G[k.type](k,n,x)}function h(){var k=a.map().zoom(),n=a.cache.locks(),x,e,t,r,w,B,F;if(y=="fixed")for(x in n){if((e=n[x]).scale!=k){F="scale("+Math.pow(2,e.zoom-k)+")";r=-1;for(w=(t=e.features).length;++r<w;)j((B=t[r]).data.geometry,B.element,F);e.scale=k}}else for(x in n){r=-1;for(w=(t=(e=n[x]).features).length;++r<w;)j((B=t[r]).data.geometry,B.element,"");delete e.scale}}var a=s.layer(function(k,n){function x(t){var r=[];if(t.next)k.request=
d(t.next.href,x);switch(t.type){case "FeatureCollection":for(var w=0;w<t.features.length;w++){var B=t.features[w],F=c(B.geometry,n);F&&r.push({element:e.appendChild(F),data:B})}break;case "Feature":(F=c(t.geometry,n))&&r.push({element:e.appendChild(F),data:t});break;default:(F=c(t,n))&&r.push({element:e.appendChild(F),data:{type:"Feature",geometry:t}});break}k.ready=true;r.push.apply(k.features,r);a.dispatch({type:"load",tile:k,features:r})}var e=k.element=s.svg("g");k.features=[];n=f(n(k).locationPoint);
if(l!=null)k.request=d(typeof l=="function"?l(k):l,x);else x({type:"FeatureCollection",features:A||[]})},function(k){k.request&&k.request.abort(true)}),g=a.container(),l,o=true,q="org.polymaps."+s.id(),m="url(#"+q+")",i=g.insertBefore(s.svg("clipPath"),g.firstChild),u=i.appendChild(s.svg("rect")),y="auto",A;g.setAttribute("fill-rule","evenodd");i.setAttribute("id",q);if(!arguments.length)d=s.queue.json;var E={Point:function(k,n){var x=n(k.coordinates),e=s.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform",
"translate("+x.x+","+x.y+")");return e},MultiPoint:function(k,n){for(var x=s.svg("g"),e=k.coordinates,t,r,w=-1,B=e.length;++w<B;){r=x.appendChild(s.svg("circle"));r.setAttribute("r",4.5);r.setAttribute("transform","translate("+(t=n(e[w])).x+","+t.y+")")}return x},LineString:function(k,n){for(var x=s.svg("path"),e=["M"],t=k.coordinates,r,w=-1,B=t.length;++w<B;)e.push((r=n(t[w])).x,",",r.y,"L");e.pop();if(e.length){x.setAttribute("d",e.join(""));return x}},MultiLineString:function(k,n){for(var x=s.svg("path"),
e=[],t=k.coordinates,r,w=-1,B,F=t.length,H;++w<F;){r=t[w];B=-1;H=r.length;for(e.push("M");++B<H;)e.push((p=n(r[B])).x,",",p.y,"L");e.pop()}if(e.length){x.setAttribute("d",e.join(""));return x}},Polygon:function(k,n){for(var x=s.svg("path"),e=[],t=k.coordinates,r,w=-1,B,F=t.length,H;++w<F;){r=t[w];B=-1;H=r.length-1;for(e.push("M");++B<H;)e.push((p=n(r[B])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){x.setAttribute("d",e.join(""));return x}},MultiPolygon:function(k,n){for(var x=s.svg("path"),e=[],
t=k.coordinates,r,w,B=-1,F,H,O=t.length,N,z;++B<O;){r=t[B];F=-1;for(N=r.length;++F<N;){w=r[F];H=-1;z=w.length-1;for(e.push("M");++H<z;)e.push((p=n(w[H])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){x.setAttribute("d",e.join(""));return x}},GeometryCollection:function(k,n){for(var x=s.svg("g"),e=-1,t=k.geometries,r=t.length,w;++e<r;)(w=c(t[e],n))&&x.appendChild(w);return x}},G={Point:function(k,n,x){k=k.coordinates;n.setAttribute("transform","translate("+k.x+","+k.y+")"+x)},MultiPoint:function(k,
n,x){k=k.coordinates;var e=-1,t=r.length;n=n.firstChild;for(var r;++e<t;){r=k[e];n.setAttribute("transform","translate("+r.x+","+r.y+")"+x);n=n.nextSibling}}};a.url=function(k){if(!arguments.length)return l;l=typeof k=="string"&&/{.}/.test(k)?s.url(k):k;if(l!=null)A=null;typeof l=="string"&&a.tile(false);return a.reload()};a.features=function(k){if(!arguments.length)return A;if(A=k){l=null;a.tile(false)}return a.reload()};a.clip=function(k){if(!arguments.length)return o;o&&g.removeChild(i);if(o=k)g.insertBefore(i,
g.firstChild);var n=a.cache.locks();for(var x in n)o?n[x].element.setAttribute("clip-path",m):n[x].element.removeAttribute("clip-path");return a};var C=a.tile;a.tile=function(k){arguments.length&&!k&&a.clip(k);return C.apply(a,arguments)};var L=a.map;a.map=function(k){if(k&&u){var n=k.tileSize();u.setAttribute("width",n.x);u.setAttribute("height",n.y)}return L.apply(a,arguments)};a.scale=function(k){if(!arguments.length)return y;(y=k)?a.on("move",h):a.off("move",h);a.map()&&h();return a};a.show=function(k){o?
k.element.setAttribute("clip-path",m):k.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:k,features:k.features});return a};a.reshow=function(){var k=a.cache.locks();for(var n in k)a.show(k[n]);return a};return a};s.dblclick=function(){function d(a){var g=j.zoom();g=a.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);c==="mouse"?j.zoomBy(g,j.mouse(a)):j.zoomBy(g)}var f={},c="mouse",j,h;f.zoom=function(a){if(!arguments.length)return c;c=a;return f};f.map=function(a){if(!arguments.length)return j;
if(j){h.removeEventListener("dblclick",d,false);h=null}if(j=a){h=j.container();h.addEventListener("dblclick",d,false)}return f};return f};s.drag=function(){function d(g){if(!g.shiftKey){a={x:g.clientX,y:g.clientY};j.focusableParent().focus();g.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(g){if(a){j.panBy({x:g.clientX-a.x,y:g.clientY-a.y});a.x=g.clientX;a.y=g.clientY}}var c={},j,h,a;c.map=function(g){if(!arguments.length)return j;if(j){h.removeEventListener("mousedown",
d,false);h=null}if(j=g){h=j.container();h.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(g){if(a){f(g);a=null;document.body.style.removeProperty("cursor")}},false);return c};s.wheel=function(){function d(){l=null}function f(m){var i=(m.wheelDelta/120||-m.detail)*0.1,u;if(ba<0){u=Date.now();var y=u-h;if(y>9&&Math.abs(m.wheelDelta)/y>=50)ba=1;h=u}if(ba==1)i*=0.03;if(!a&&i){u=Date.now();if(u-j>200){i=i>0?+1:-1;j=
u}else i=0}if(i)switch(g){case "mouse":u=o.mouse(m);l||(l=o.pointLocation(u));o.off("move",d).zoomBy(i,u,l).on("move",d);break;case "location":o.zoomBy(i,o.locationPoint(l),l);break;default:o.zoomBy(i);break}m.preventDefault();return false}var c={},j=0,h=0,a=true,g="mouse",l,o,q;c.smooth=function(m){if(!arguments.length)return a;a=m;return c};c.zoom=function(m,i){if(!arguments.length)return g;g=m;l=i;if(o)g=="mouse"?o.on("move",d):o.off("move",d);return c};c.map=function(m){if(!arguments.length)return o;
if(o){q.removeEventListener("mousemove",d,false);q.removeEventListener("mousewheel",f,false);q.removeEventListener("DOMMouseScroll",f,false);q=null;o.off("move",d)}if(o=m){g=="mouse"&&o.on("move",d);q=o.container();q.addEventListener("mousemove",d,false);q.addEventListener("mousewheel",f,false);q.addEventListener("DOMMouseScroll",f,false)}return c};return c};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function d(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var A=Date.now(),
E=0,G=0;switch(y.keyCode){case 37:if(!a.left){g=A;a.left=1;a.right||(E=m)}break;case 39:if(!a.right){g=A;a.right=1;a.left||(E=-m)}break;case 38:if(!a.up){g=A;a.up=1;a.down||(G=m)}break;case 40:if(!a.down){g=A;a.down=1;a.up||(G=-m)}break;default:return}if(E||G)i.panBy({x:E,y:G});if(!l&&a.left|a.right|a.up|a.down)l=setInterval(j,q);y.preventDefault()}}function f(y){g=Date.now();switch(y.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(l&&
!(a.left|a.right|a.up|a.down))l=clearInterval(l);y.preventDefault()}function c(y){switch(y.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}y.preventDefault()}function j(){if(i)if(!(Date.now()<g+o)){var y=(a.left-a.right)*m,A=(a.up-a.down)*m;if(y||A)i.panBy({x:y,y:A})}}var h={},a={left:0,right:0,up:0,down:0},g=0,l,o=250,q=50,m=16,i,u;h.map=function(y){if(!arguments.length)return i;if(i){u.removeEventListener("keypress",
c,false);u.removeEventListener("keydown",d,false);u.removeEventListener("keyup",f,false);u=null}if(i=y){u=i.focusableParent();u.addEventListener("keypress",c,false);u.addEventListener("keydown",d,false);u.addEventListener("keyup",f,false)}return h};h.speed=function(y){if(!arguments.length)return m;m=y;return h};return h};s.hash=function(){function d(){var l=g(h);if(j!==l)location.replace(j=l)}function f(){if(location.hash!==j)if(a(h,(j=location.hash).substring(1)))d()}var c={},j,h,a=function(l,o){var q=
o.split("/").map(Number);if(q.length<3||q.some(isNaN))return true;else{var m=l.size();l.zoomBy(q[0]-l.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,q[1])),lon:q[2]})}},g=function(l){var o=l.center();l=l.zoom();var q=Math.max(0,Math.ceil(Math.log(l)/Math.LN2));return"#"+l.toFixed(2)+"/"+o.lat.toFixed(q)+"/"+o.lon.toFixed(q)};c.map=function(l){if(!arguments.length)return h;if(h){h.off("move",d);window.removeEventListener("hashchange",f,false)}if(h=l){h.on("move",d);window.addEventListener("hashchange",
f,false);location.hash?f():d()}return c};c.parser=function(l){if(!arguments.length)return a;a=l;return c};c.formatter=function(l){if(!arguments.length)return g;g=l;return c};return c};s.interact=function(){var d={},f=s.drag(),c=s.wheel(),j=s.dblclick(),h=s.arrow();d.map=function(a){f.map(a);c.map(a);j.map(a);h.map(a);return d};return d};s.compass=function(){function d(v){C.setAttribute("class","compass active");H||(H=setInterval(f,t));O&&J.panBy(O);x=Date.now();return m(v)}function f(){O&&Date.now()>
x+e&&J.panBy(O)}function c(v){if(v.shiftKey){z={x0:J.mouse(v)};J.focusableParent().focus();return m(v)}}function j(v){if(z){z.x1=J.mouse(v);P.setAttribute("x",Math.min(z.x0.x,z.x1.x));P.setAttribute("y",Math.min(z.x0.y,z.x1.y));P.setAttribute("width",Math.abs(z.x0.x-z.x1.x));P.setAttribute("height",Math.abs(z.x0.y-z.x1.y));P.removeAttribute("display")}}function h(){C.setAttribute("class","compass");if(z){if(z.x1){J.extent([J.pointLocation({x:Math.min(z.x0.x,z.x1.x),y:Math.max(z.x0.y,z.x1.y)}),J.pointLocation({x:Math.max(z.x0.x,
z.x1.x),y:Math.min(z.x0.y,z.x1.y)})]);P.setAttribute("display","none")}z=null}if(H){clearInterval(H);H=0}}function a(v){return function(){v?this.setAttribute("class","active"):this.removeAttribute("class");O=v}}function g(v){return function(D){C.setAttribute("class","compass active");var M=J.zoom();J.zoom(v<0?Math.ceil(M)-1:Math.floor(M)+1);return m(D)}}function l(v){return function(D){J.zoom(v);return m(D)}}function o(){this.setAttribute("class","active")}function q(){this.removeAttribute("class")}
function m(v){v.stopPropagation();v.preventDefault();return false}function i(v){var D=Math.SQRT1_2*k,M=k*0.7,K=k*0.2,I=s.svg("g"),Q=I.appendChild(s.svg("path")),T=I.appendChild(s.svg("path"));Q.setAttribute("class","direction");Q.setAttribute("pointer-events","all");Q.setAttribute("d","M0,0L"+D+","+D+"A"+k+","+k+" 0 0,1 "+-D+","+D+"Z");T.setAttribute("class","chevron");T.setAttribute("d","M"+K+","+(M-K)+"L0,"+M+" "+-K+","+(M-K));T.setAttribute("pointer-events","none");I.addEventListener("mousedown",
d,false);I.addEventListener("mouseover",a(v),false);I.addEventListener("mouseout",a(null),false);I.addEventListener("dblclick",m,false);return I}function u(v){var D=k*0.4,M=D/2,K=s.svg("g"),I=K.appendChild(s.svg("path")),Q=K.appendChild(s.svg("path")),T=K.appendChild(s.svg("path")),X=K.appendChild(s.svg("path"));I.setAttribute("class","back");I.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");Q.setAttribute("class","direction");Q.setAttribute("d",I.getAttribute("d"));T.setAttribute("class",
"chevron");T.setAttribute("d","M"+-M+","+-D+"H"+M+(v>0?"M0,"+(-D-M)+"V"+-M:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",I.getAttribute("d"));K.addEventListener("mousedown",g(v),false);K.addEventListener("mouseover",o,false);K.addEventListener("mouseout",q,false);K.addEventListener("dblclick",m,false);return K}function y(v){var D=k*0.2,M=k*0.4,K=s.svg("g"),I=K.appendChild(s.svg("rect")),Q=K.appendChild(s.svg("path"));I.setAttribute("pointer-events","all");I.setAttribute("fill",
"none");I.setAttribute("x",-M);I.setAttribute("y",-0.75*M);I.setAttribute("width",2*M);I.setAttribute("height",1.5*M);Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-D+",0H"+D);K.addEventListener("mousedown",l(v),false);K.addEventListener("dblclick",m,false);return K}function A(){var v=k+6,D=v,M=J.size();switch(r){case "top-left":break;case "top-right":v=M.x-v;break;case "bottom-left":D=M.y-D;break;case "bottom-right":v=M.x-v;D=M.y-D;break}v="translate("+v+","+D+")";N&&N.setAttribute("transform",
v);B&&B.setAttribute("transform",v);for(var K in L)K==J.zoom()?L[K].setAttribute("class","active"):L[K].removeAttribute("class")}function E(){for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(P);if(F!="none"){N=C.appendChild(s.svg("g"));N.setAttribute("class","pan");var v=N.appendChild(s.svg("circle"));v.setAttribute("class","back");v.setAttribute("r",k);N.appendChild(i({x:0,y:-n})).setAttribute("transform","rotate(0)");N.appendChild(i({x:n,y:0})).setAttribute("transform","rotate(90)");N.appendChild(i({x:0,
y:n})).setAttribute("transform","rotate(180)");N.appendChild(i({x:-n,y:0})).setAttribute("transform","rotate(270)");v=N.appendChild(s.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",k)}else N=null;if(w!="none"){B=C.appendChild(s.svg("g"));B.setAttribute("class","zoom");v=-0.5;if(w=="big"){L={};var D=J.zoomRange()[0];for(v=0;D<=J.zoomRange()[1];D++,v++)(L[D]=B.appendChild(y(D))).setAttribute("transform","translate(0,"+-(v+0.75)*k*0.4+")")}D=F=="none"?
0.4:2;B.setAttribute("transform","translate(0,"+k*(/^top-/.test(r)?D+(v+0.5)*0.4:-D)+")");B.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(v+0.5)*k*0.4+")");B.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else B=null;A()}var G={},C=s.svg("g"),L={},k=30,n=16,x=0,e=250,t=50,r="top-left",w="small",B,F="small",H,O,N,z,P=s.svg("rect"),J,S,U;C.setAttribute("class","compass");P.setAttribute("class","back fore");P.setAttribute("pointer-events","none");P.setAttribute("display","none");
G.radius=function(v){if(!arguments.length)return k;k=v;J&&E();return G};G.speed=function(v){if(!arguments.length)return k;n=v;return G};G.position=function(v){if(!arguments.length)return r;r=v;J&&E();return G};G.pan=function(v){if(!arguments.length)return F;F=v;J&&E();return G};G.zoom=function(v){if(!arguments.length)return w;w=v;J&&E();return G};G.map=function(v){if(!arguments.length)return J;if(J){S.removeEventListener("mousedown",c,false);S.removeChild(C);S=null;U.removeEventListener("mousemove",
j,false);U.removeEventListener("mouseup",h,false);U=null;J.off("move",A).off("resize",A)}if(J=v){S=J.container();S.appendChild(C);S.addEventListener("mousedown",c,false);U=S.ownerDocument.defaultView;U.addEventListener("mousemove",j,false);U.addEventListener("mouseup",h,false);J.on("move",A).on("resize",A);E()}return G};return G};s.grid=function(){function d(){var h=j.firstChild,a=c.size(),g=c.pointLocation(Z);c.pointLocation(a);var l=Math.pow(2,4-Math.round(c.zoom()));g.lat=Math.floor(g.lat/l)*l;
g.lon=Math.ceil(g.lon/l)*l;for(var o;(o=c.locationPoint(g).x)<=a.x;g.lon+=l){h||(h=j.appendChild(s.svg("line")));h.setAttribute("x1",o);h.setAttribute("x2",o);h.setAttribute("y1",0);h.setAttribute("y2",a.y);h=h.nextSibling}for(;(o=c.locationPoint(g).y)<=a.y;g.lat-=l){h||(h=j.appendChild(s.svg("line")));h.setAttribute("y1",o);h.setAttribute("y2",o);h.setAttribute("x1",0);h.setAttribute("x2",a.x);h=h.nextSibling}for(;h;){a=h.nextSibling;j.removeChild(h);h=a}}var f={},c,j=s.svg("g");j.setAttribute("class",
"grid");f.map=function(h){if(!arguments.length)return c;if(c){j.parentNode.removeChild(j);c.off("move",d).off("resize",d)}if(c=h){c.on("move",d).on("resize",d);c.container().appendChild(j);c.dispatch({type:"move"})}return f};return f};s.stylist=function(){function d(h){var a=h.features.length,g=f.length,l=c.length,o,q,m,i,u,y;for(u=0;u<a;++u)if(q=(o=h.features[u]).element){o=o.data;for(y=0;y<g;++y){i=(m=f[y]).value;if(typeof i==="function")i=i.call(null,o);i==null?m.name.local?q.removeAttributeNS(m.name.space,
m.name.local):q.removeAttribute(m.name):m.name.local?q.setAttributeNS(m.name.space,m.name.local,i):q.setAttribute(m.name,i)}for(y=0;y<l;++y){i=(m=c[y]).value;if(typeof i==="function")i=i.call(null,o);i==null?q.style.removeProperty(m.name):q.style.setProperty(m.name,i,m.priority)}if(i=j){if(typeof i==="function")i=i.call(null,o);for(;q.lastChild;)q.removeChild(q.lastChild);i!=null&&q.appendChild(s.svg("title")).appendChild(document.createTextNode(i))}}}var f=[],c=[],j;d.attr=function(h,a){f.push({name:fa(h),
value:a});return d};d.style=function(h,a,g){c.push({name:h,value:a,priority:arguments.length<3?null:g});return d};d.title=function(h){j=h;return d};return d}})(org.polymaps);
