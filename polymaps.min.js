if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(r){function J(){for(var h=0;h<J.maps.length;h++)J.maps[h].resize()}function P(h){return 360/Math.PI*Math.atan(Math.exp(h*Math.PI/180))-90}function Q(h){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360))}function U(h,a){if(h.row>a.row){var f=h;h=a;a=f}return{x0:h.column,y0:h.row,x1:a.column,y1:a.row,dx:a.column-h.column,dy:a.row-h.row}}function X(h,a,f,d,c){f=Math.max(f,Math.floor(a.y0));d=Math.min(d,Math.ceil(a.y1));if(h.x0<a.x0||h.x1<a.x1){var e=h;h=a;a=e}e=h.dx/h.dy;var i=
a.dx/a.dy,j=h.dx>0,k=a.dx<0;for(f=f;f<d;f++){var s=e*Math.max(0,Math.min(h.dy,f+j-h.y0))+h.x0;c(Math.floor(i*Math.max(0,Math.min(a.dy,f+k-a.y0))+a.x0),Math.ceil(s),f)}}function Y(h,a,f,d,c,e){var i=U(h,a);a=U(a,f);h=U(f,h);if(i.dy>a.dy){f=i;i=a;a=f}if(i.dy>h.dy){f=i;i=h;h=f}if(a.dy>h.dy){f=a;a=h;h=f}i.dy&&X(h,i,d,c,e);a.dy&&X(h,a,d,c,e)}r.version="2.0.1";var R={x:0,y:0};r.id=function(){var h=0;return function(){return++h}}();r.svg=function(h){return document.createElementNS(r.ns.svg,h)};r.ns={svg:"http://www.w3.org/2000/svg",
xlink:"http://www.w3.org/1999/xlink"};r.transform=function(h,a,f,d,c,e){var i={},j,k,s;if(!arguments.length){h=1;a=c=f=0;d=1;e=0}i.zoomFraction=function(m){if(!arguments.length)return k;k=m;j=Math.floor(k+Math.log(Math.sqrt(h*h+a*a+f*f+d*d))/Math.log(2));s=Math.pow(2,-j);return i};i.apply=function(m){var l=Math.pow(2,-m.zoom),g=Math.pow(2,m.zoom-j);return{column:(h*m.column*l+f*m.row*l+c)*g,row:(a*m.column*l+d*m.row*l+e)*g,zoom:m.zoom-j}};i.unapply=function(m){var l=Math.pow(2,-m.zoom),g=Math.pow(2,
m.zoom+j);return{column:(m.column*l*d-m.row*l*f-c*d+e*f)/(h*d-a*f)*g,row:(m.column*l*a-m.row*l*h-c*a+e*h)/(f*a-d*h)*g,zoom:m.zoom+j}};i.toString=function(){return"matrix("+[h*s,a*s,f*s,d*s].join(" ")+" 0 0)"};return i.zoomFraction(0)};r.cache=function(h,a){function f(l){m--;a&&a(l);delete i[l.key];if(l.next)l.next.prev=l.prev;else if(k=l.prev)k.next=null;if(l.prev)l.prev.next=l.next;else if(j=l.next)j.prev=null}function d(){for(var l=k;m>s;l=l.prev){if(!l)break;l.lock||f(l)}}var c={},e={},i={},j=
null,k=null,s=64,m=0;c.peek=function(l){return i[[l.zoom,l.column,l.row].join("/")]};c.load=function(l,g){var q=[l.zoom,l.column,l.row].join("/"),t=i[q];if(t){if(t.prev){if(t.prev.next=t.next)t.next.prev=t.prev;else k=t.prev;t.prev=null;t.next=j;j=j.prev=t}t.lock=1;return e[q]=t}t={key:q,column:l.column,row:l.row,zoom:l.zoom,next:j,prev:null,lock:1};h.call(null,t,g);e[q]=i[q]=t;if(j)j.prev=t;else k=t;j=t;m++;d();return t};c.unload=function(l){if(!(l in e))return false;var g=e[l];g.lock=0;delete e[l];
g.request&&g.request.abort(false)?f(g):d();return g};c.locks=function(){return e};c.size=function(l){if(!arguments.length)return s;s=l;d();return c};return c};r.url=function(h){function a(d){var c=1<<d.zoom,e=d.column%c;if(e<0)e+=c;return h.replace(/{(.)}/g,function(i,j){switch(j){case "S":return f[(d.zoom+d.row+e)%f.length];case "Z":return d.zoom;case "X":return e;case "Y":return d.row;case "B":var k=r.map.coordinateLocation({row:d.row,column:e,zoom:d.zoom}),s=r.map.coordinateLocation({row:d.row+
1,column:e+1,zoom:d.zoom}),m=Math.ceil(Math.log(d.zoom)/Math.LN2);return s.lat.toFixed(m)+","+k.lon.toFixed(m)+","+k.lat.toFixed(m)+","+s.lon.toFixed(m)}return j})}var f=[];a.template=function(d){if(!arguments.length)return h;h=d;return a};a.hosts=function(d){if(!arguments.length)return f;f=d;return a};return a};r.dispatch=function(h){var a={};h.on=function(f,d){for(var c=a[f]||(a[f]=[]),e=0;e<c.length;e++)if(c[e].handler==d)return h;c.push({handler:d,on:true});return h};h.off=function(f,d){var c=
a[f];if(c)for(var e=0;e<c.length;e++){var i=c[e];if(i.handler==d){i.on=false;c.splice(e,1);break}}return h};return function(f){var d=a[f.type];if(d){d=d.slice();for(var c=0;c<d.length;c++){var e=d[c];e.on&&e.handler.call(h,f)}}}};r.queue=function(){function h(){if(!(c>=e||!d.length)){c++;d.pop()()}}function a(i){for(var j=0;j<d.length;j++)if(d[j]==i){d.splice(j,1);return true}return false}function f(i,j,k){function s(){m=new XMLHttpRequest;k&&m.overrideMimeType(k);m.open("GET",i,true);m.onreadystatechange=
function(){if(m.readyState==4){c--;m.status<300&&j(m);h()}};m.send(null)}var m;d.push(s);h();return{abort:function(l){if(a(s))return true;if(l&&m){m.abort();return true}return false}}}var d=[],c=0,e=6;return{text:function(i,j,k){return f(i,function(s){s.responseText&&j(s.responseText)},k)},xml:function(i,j){return f(i,function(k){k.responseXML&&j(k.responseXML)},"application/xml")},json:function(i,j){return f(i,function(k){k.responseText&&j(JSON.parse(k.responseText))},"application/json")},image:function(i,
j,k){function s(){m=document.createElement("img");m.onerror=function(){c--;h()};m.onload=function(){c--;k(m);h()};m.src=j;i.setAttributeNS(r.ns.xlink,"href",j)}var m;d.push(s);h();return{abort:function(l){if(a(s))return true;if(l&&m){m.src="about:";return true}return false}}}}}();r.map=function(){function h(){if(G){var n=45/Math.pow(2,k+s-3),u=Math.max(Math.abs(t*e.x+q*e.y),Math.abs(w*e.x+o*e.y)),y=P(B-u*n/i.y);u=P(H+u*n/i.y);j.lat=Math.max(y,Math.min(u,j.lat));y=Math.max(Math.abs(t*e.y+q*e.x),Math.abs(w*
e.y+o*e.x));j.lon=Math.max(G[0].lon-y*n/i.x,Math.min(G[1].lon+y*n/i.x,j.lon))}}var a={},f,d,c=R,e=R,i={x:256,y:256},j={lat:37.76487,lon:-122.41948},k=12,s=0,m=1,l=[1,18],g=0,q=1,t=0,o=1,w=0,B=-180,H=180,G=[{lat:P(B),lon:-Infinity},{lat:P(H),lon:Infinity}];a.locationCoordinate=function(n){n=r.map.locationCoordinate(n);var u=Math.pow(2,k);n.column*=u;n.row*=u;n.zoom+=k;return n};a.coordinateLocation=r.map.coordinateLocation;a.coordinatePoint=function(n,u){var y=Math.pow(2,k-u.zoom),D=Math.pow(2,k-n.zoom),
E=(u.column*y-n.column*D)*i.x*m;y=(u.row*y-n.row*D)*i.y*m;return{x:e.x+q*E-t*y,y:e.y+t*E+q*y}};a.pointCoordinate=function(n,u){var y=Math.pow(2,k-n.zoom),D=(u.x-e.x)/m,E=(u.y-e.y)/m;return{column:n.column*y+(o*D-w*E)/i.x,row:n.row*y+(w*D+o*E)/i.y,zoom:k}};a.locationPoint=function(n){var u=Math.pow(2,k+s-3)/45,y=(n.lon-j.lon)*u*i.x;n=(Q(j.lat)-Q(n.lat))*u*i.y;return{x:e.x+q*y-t*n,y:e.y+t*y+q*n}};a.pointLocation=function(n){var u=45/Math.pow(2,k+s-3),y=(n.x-e.x)*u;n=(n.y-e.y)*u;return{lon:j.lon+(o*
y-w*n)/i.x,lat:P(Q(j.lat)-(w*y+o*n)/i.y)}};var C=r.svg("rect");C.setAttribute("visibility","hidden");C.setAttribute("pointer-events","all");a.container=function(n){if(!arguments.length)return f;f=n;f.setAttribute("class","map");f.appendChild(C);return a.resize()};a.focusableParent=function(){for(var n=f;n;n=n.parentNode)if(n.tabIndex>=0)return n;return window};a.mouse=function(n){var u=(f.ownerSVGElement||f).createSVGPoint();u.x=n.clientX;u.y=n.clientY;return u.matrixTransform(f.getScreenCTM().inverse())};
a.size=function(n){if(!arguments.length)return c;d=n;return a.resize()};a.resize=function(){if(d){c=d;J.remove(a)}else{var n=f.ownerSVGElement||f;if(n.offsetWidth==null){C.setAttribute("width","100%");C.setAttribute("height","100%");n=C}b=n.getBoundingClientRect();c={x:b.width,y:b.height};J.add(a)}C.setAttribute("width",c.x);C.setAttribute("height",c.y);e={x:c.x/2,y:c.y/2};h();a.dispatch({type:"resize"});return a};a.tileSize=function(n){if(!arguments.length)return i;i=n;a.dispatch({type:"move"});
return a};a.center=function(n){if(!arguments.length)return j;j=n;h();a.dispatch({type:"move"});return a};a.panBy=function(n){var u=45/Math.pow(2,k+s-3),y=n.x*u;n=n.y*u;return a.center({lon:j.lon+(w*n-o*y)/i.x,lat:P(Q(j.lat)+(w*y+o*n)/i.y)})};a.centerRange=function(n){if(!arguments.length)return G;if(G=n){B=G[0].lat>-90?Q(G[0].lat):-Infinity;H=G[0].lat<90?Q(G[1].lat):Infinity}else{B=-Infinity;H=Infinity}h();a.dispatch({type:"move"});return a};a.zoom=function(n){if(!arguments.length)return k+s;k=Math.max(l[0],
Math.min(l[1],n));s=k-(k=Math.round(k));m=Math.pow(2,s);return a.center(j)};a.zoomBy=function(n,u,y){if(arguments.length<2)return a.zoom(k+s+n);if(arguments.length<3)y=a.pointLocation(u);k=Math.max(l[0],Math.min(l[1],k+s+n));s=k-(k=Math.round(k));m=Math.pow(2,s);var D=a.locationPoint(y);return a.panBy({x:u.x-D.x,y:u.y-D.y})};a.zoomRange=function(n){if(!arguments.length)return l;l=n;return a.zoom(k+s)};a.angle=function(n){if(!arguments.length)return g;g=n;q=Math.cos(g);t=Math.sin(g);o=Math.cos(-g);
w=Math.sin(-g);h();a.dispatch({type:"move"});return a};a.add=function(n){n.map(a);return a};a.remove=function(n){n.map(null);return a};a.dispatch=r.dispatch(a);return a};J.maps=[];J.add=function(h){for(var a=0;a<J.maps.length;a++)if(J.maps[a]==h)return;J.maps.push(h)};J.remove=function(h){for(var a=0;a<J.maps.length;a++)if(J.maps[a]==h){J.maps.splice(a,1);return}};window.addEventListener("resize",J,false);r.map.locationCoordinate=function(h){var a=1/360;return{column:(h.lon+180)*a,row:(180-Q(h.lat))*
a,zoom:0}};r.map.coordinateLocation=function(h){var a=45/Math.pow(2,h.zoom-3);return{lon:a*h.column-180,lat:P(180-a*h.row)}};r.layer=function(h,a){function f(){function q(z){var A=z.zoom,F=1<<A,I=z.column%F,N=z.row;if(I<0)I+=F;return{locationPoint:function(M){M=r.map.locationCoordinate(M);var O=Math.pow(2,A-M.zoom);return{x:C.x*(O*M.column-I),y:C.y*(O*M.row-N)}}}}function t(z,A,F){var I=y.zoom,N=2-E,M=4+E;for(z=z;z<A;z++){var O=c.load({column:z,row:F,zoom:I},q);if(!O.ready&&!(O.key in x)){O.proxyRefs=
{};for(var S,T,K,L=1;L<=N;L++){T=true;for(var V=0,Z=1<<L;V<=Z;V++)for(var W=0;W<=Z;W++)if((K=c.peek(S={column:(z<<L)+W,row:(F<<L)+V,zoom:I+L}))&&K.ready){x[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K}else T=false;if(T)break}if(!T)for(L=1;L<=M;L++)if((K=c.peek(S={column:z>>L,row:F>>L,zoom:I-L}))&&K.ready){x[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K;break}}x[O.key]=O}}var o=d.map(),w=o.zoom(),B=w-(w=Math.round(w)),H=o.size(),G=o.angle(),C=o.tileSize(),n=o.locationCoordinate(o.center());
i?m.removeAttribute("visibility"):m.setAttribute("visibility","hidden");for(var u=-4;u<=2;u++)g[u].setAttribute("class","zoom"+(u<0?"":"+")+u+" zoom"+(w+u));m.setAttribute("transform","translate("+H.x/2+","+H.y/2+")"+(G?"rotate("+G/Math.PI*180+")":"")+(B?"scale("+Math.pow(2,B)+")":"")+(l?l.zoomFraction(B):""));var y=o.pointCoordinate(n,R);u=o.pointCoordinate(n,{x:H.x,y:0});var D=o.pointCoordinate(n,H);o=o.pointCoordinate(n,{x:0,y:H.y});if(!l&&!G&&!B){n.column=(Math.round(C.x*n.column)+(H.x&1)/2)/
C.x;n.row=(Math.round(C.y*n.row)+(H.y&1)/2)/C.y}var E=j?j(w)-w:0;if(E){B=Math.pow(2,E);y.column*=B;y.row*=B;u.column*=B;u.row*=B;D.column*=B;D.row*=B;o.column*=B;o.row*=B;y.zoom=u.zoom=D.zoom=o.zoom+=E}if(l){y=l.unapply(y);u=l.unapply(u);D=l.unapply(D);o=l.unapply(o);n=l.unapply(n)}w=c.locks();var x={};for(var v in w)w[v].proxyCount=0;if(i&&E>-5&&E<3){B=1<<y.zoom;if(e){Y(y,u,D,0,B,t);Y(D,o,y,0,B,t)}else{D=Math.floor((y.column+D.column)/2);o=Math.max(0,Math.min(B-1,Math.floor((u.row+o.row)/2)));u=
Math.min(4,y.zoom);D=D>>u<<u;o=o>>u<<u;t(D,D+1,o)}}for(v in x){u=x[v];B=Math.pow(2,u.level=u.zoom-n.zoom);D=C.x*(u.column-n.column*B);o=C.y*(u.row-n.row*B);u.element.setAttribute("transform","translate("+D+","+o+")")}for(v in w)if(!(v in x)){u=c.unload(v);u.element.parentNode.removeChild(u.element);delete u.proxyRefs}for(v in x){u=x[v];if(u.element.parentNode!=g[u.level]){g[u.level].appendChild(u.element);d.show&&d.show(u)}}}var d={},c=d.cache=r.cache(h,a).size(512),e=true,i=true,j,k,s,m,l,g;d.map=
function(q){if(!arguments.length)return s;if(s){if(s==q){m.parentNode.appendChild(m);return d}s.off("move",f).off("resize",f);m.parentNode.removeChild(m);m=g=null}if(s=q){m=s.container().appendChild(r.svg("g"));k&&m.setAttribute("id",k);m.setAttribute("class","layer");g={};for(var t=-4;t<=-1;t++)(g[t]=m.appendChild(r.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-t)+")");for(t=2;t>=1;t--)(g[t]=m.appendChild(r.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-t)+")");g[0]=m.appendChild(r.svg("g"));
d.init&&d.init(m);s.on("move",f).on("resize",f);f()}return d};d.container=function(){return m};d.id=function(q){if(!arguments.length)return k;k=q;return d};d.visible=function(q){if(!arguments.length)return i;i=q;s&&f();return d};d.transform=function(q){if(!arguments.length)return l;l=q;s&&f();return d};d.zoom=function(q){if(!arguments.length)return j;j=typeof q=="function"||q==null?q:function(){return q};return d};d.tile=function(q){if(!arguments.length)return e;e=q;return d};d.dispatch=r.dispatch(d);
d.on("load",function(q){if(q.tile.proxyRefs){for(var t in q.tile.proxyRefs){var o=q.tile.proxyRefs[t];--o.proxyCount<=0&&c.unload(t)&&o.element.parentNode.removeChild(o.element)}delete q.tile.proxyRefs}});return d};r.image=function(){var h=r.layer(function(f){var d=f.element=r.svg("image"),c=h.map().tileSize();d.setAttribute("preserveAspectRatio","none");d.setAttribute("width",c.x);d.setAttribute("height",c.y);d.setAttribute("opacity",0);if(typeof a=="function")f.request=r.queue.image(d,a(f),function(){delete f.request;
f.ready=true;d.removeAttribute("opacity");h.dispatch({type:"load",tile:f})});else{f.ready=true;d.setAttributeNS(r.ns.xlink,"href",a);h.dispatch({type:"load",tile:f})}},function(f){f.request&&f.request.abort(true)}),a="about:blank";h.url=function(f){if(!arguments.length)return a;a=typeof f=="string"&&/{.}/.test(f)?r.url(f):f;return h};return h};r.geoJson=function(h){function a(g,q){var t=q({lat:g[1],lon:g[0]}),o=r.svg("circle");o.setAttribute("r",4.5);o.setAttribute("cx",t.x);o.setAttribute("cy",t.y);
return o}function f(g,q,t,o){o.push("M");for(var w=0;w<g.length-q;w++){p=t({lat:g[w][1],lon:g[w][0]});o.push(p.x);o.push(",");o.push(p.y);o.push("L")}o.pop()}function d(g,q,t,o){for(var w=0;w<g.length;w++)f(g[w],q,t,o);q&&o.push("Z")}function c(g,q,t,o){for(var w=[],B=0;B<q.length;B++)g(q[B],t,o,w);if(w.length){g=r.svg("path");g.setAttribute("d",w.join(""));return g}}var e=r.layer(function(g,q){function t(w){var B=s[g.key]||(s[g.key]=[]),H=[];if(w.next)g.request=h(w.next.href,t);for(var G=0;G<w.features.length;G++){var C=
w.features[G],n=C.geometry&&C.geometry.type in l&&l[C.geometry.type](C.geometry,q.locationPoint);if(n){C={element:o.appendChild(n),data:C};B.push(C);H.push(C)}}g.ready=true;e.dispatch({type:"load",tile:g,features:H})}var o=g.element=r.svg("g");q=q(g);if(m)t({features:m});else g.request=h(i(g),t);k&&o.setAttribute("clip-path","url(#"+k+")")},function(g){g.request&&g.request.abort(true);delete s[g.key]}),i=r.url("about:blank"),j=true,k,s={},m;if(!arguments.length)h=r.queue.json;var l={Point:function(g,
q){return a(g.coordinates,q)},MultiPoint:function(g,q){for(var t=r.svg("g"),o=0;o<g.coordinates.length;o++)t.appendChild(a(g.coordinates[o],q));return t},LineString:function(g,q){return c(f,[g.coordinates],0,q)},MultiLineString:function(g,q){return c(f,g.coordinates,0,q)},Polygon:function(g,q){return c(d,[g.coordinates],1,q)},MultiPolygon:function(g,q){return c(d,g.coordinates||g.coords,1,q)},GeometryCollection:function(g,q){for(var t=r.svg("g"),o=0;o<g.geometries.length;o++){var w=g.geometries[o]&&
g.geometries[o].type in l&&l[g.geometries[o].type](g.geometries[o],q);w&&t.appendChild(w)}return t}};e.url=function(g){if(!arguments.length)return i;i=typeof g=="string"?r.url(g):g;return e};e.features=function(g){if(!arguments.length)return m;g&&e.tile(false);m=g;return e};e.clip=function(g){if(!arguments.length)return j;j=g;return e};e.init=function(g){if(j&&e.tile()){var q=e.map().tileSize(),t=g.insertBefore(r.svg("clipPath"),g.firstChild),o=t.appendChild(r.svg("rect"));t.setAttribute("id",k="org.polymaps."+
r.id());o.setAttribute("width",q.x);o.setAttribute("height",q.y)}g.setAttribute("fill-rule","evenodd")};e.show=function(g){e.dispatch({type:"show",tile:g,features:s[g.key]||[]})};e.reshow=function(){var g=e.cache.locks();for(var q in g)e.show(g[q])};return e};r.dblclick=function(){function h(d){var c=f.zoom();c=d.shiftKey?Math.ceil(c)-c-1:1-c+Math.floor(c);f.zoomBy(c,f.mouse(d))}var a={},f;a.map=function(d){if(!arguments.length)return f;f=d;f.container().addEventListener("dblclick",h,false);return a};
return a};r.drag=function(){function h(i){e={x:i.clientX,y:i.clientY};d.focusableParent().focus();i.preventDefault();c=document.body.style.cursor;document.body.style.cursor="move"}function a(i){if(e){d.panBy({x:i.clientX-e.x,y:i.clientY-e.y});e.x=i.clientX;e.y=i.clientY}}var f={},d,c,e;f.map=function(i){if(!arguments.length)return d;d=i;d.container().addEventListener("mousedown",h,false);return f};window.addEventListener("mousemove",a,false);window.addEventListener("mouseup",function(i){if(e){a(i);
e=null;document.body.style.cursor=c}},false);return f};r.touch=function(){function h(j){i&&f();j.preventDefault();i=d(j)}function a(j){if(!i)return h(j);j.preventDefault();j=d(j);var k={x:j.clientX-i.clientX,y:j.clientY-i.clientY,scale:j.scale-i.scale};if(k.x||k.y||k.scale){var s=e.mouse(i);s=e.pointLocation(s);e.zoomBy(k.scale,e.mouse(j),s)}i=j}function f(){i=null}function d(j){for(var k=j.touches,s=0,m=0,l=0;l<k.length;++l){var g=k[l];s+=g.clientX;m+=g.clientY}return{clientX:s/k.length,clientY:m/
k.length,scale:j.scale}}var c={},e,i;c.map=function(j){if(!arguments.length)return e;e=j;var k=e.container();k.addEventListener("touchstart",h,false);k.addEventListener("touchmove",a,false);k.addEventListener("touchend",f,false);k.addEventListener("touchcancel",f,false);return c};return c};r.wheel=function(){function h(){e=null}function a(s){var m=Math.max(-1,Math.min(1,(s.wheelDelta/120||-s.detail)*0.1)),l=k.mouse(s);if(i){j=j*0.95+Math.abs(m)*0.05;if(j>0.5)m*=0.4}e||(e=k.pointLocation(l));k.off("move",
h);if(c)k.zoomBy(m,l,e);else if(m){var g=Date.now();if(g-d>200){k.zoomBy(m>0?+1:-1,l,e);d=g}}k.on("move",h);s.preventDefault();return false}var f={},d=0,c=true,e,i=/WebKit\/533/.test(navigator.userAgent),j=0.3,k;f.smooth=function(s){if(!arguments.length)return c;c=s;return f};f.map=function(s){if(!arguments.length)return k;(k=s).on("move",h);var m=k.container();m.addEventListener("mousemove",h,false);m.addEventListener("mousewheel",a,false);m.addEventListener("DOMMouseScroll",a,false);return f};return f};
r.arrow=function(){function h(l){if(!(l.ctrlKey||l.altKey||l.metaKey)){var g=Date.now(),q=0,t=0,o=0;switch(l.keyCode){case 37:if(!c.left){e=g;c.left=1;c.right||(q=s)}break;case 39:if(!c.right){e=g;c.right=1;c.left||(q=-s)}break;case 38:if(!c.up){e=g;c.up=1;c.down||(t=s)}break;case 40:if(!c.down){e=g;c.down=1;c.up||(t=-s)}break;case 109:case 189:if(!c.plus){e=g;c.plus=1;c.minus||(o=-1)}break;case 61:case 187:if(!c.minus){e=g;c.minus=1;c.plus||(o=1)}break;default:return}if(o){g=m.zoom();m.zoom(o<0?
Math.ceil(g)-1:Math.floor(g)+1)}else if(q||t)m.panBy({x:q,y:t});if(!i&&c.left|c.right|c.up|c.down)i=setInterval(f,k);l.preventDefault()}}function a(l){e=Date.now();switch(l.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;case 109:case 189:c.plus=0;break;case 61:case 187:c.minus=0;break;default:return}if(i&&!(c.left|c.right|c.up|c.down))i=clearInterval(i);l.preventDefault()}function f(){if(m)if(!(Date.now()<e+j)){var l=(c.left-c.right)*s,g=(c.up-
c.down)*s;if(l||g)m.panBy({x:l,y:g})}}var d={},c={left:0,right:0,up:0,down:0,plus:0,minus:0},e=0,i,j=250,k=50,s=16,m;d.map=function(l){if(!arguments.length)return m;m=l;var g=m.focusableParent();g.addEventListener("keydown",h,false);g.addEventListener("keyup",a,false);return d};d.speed=function(l){if(!arguments.length)return s;s=l;return d};return d};r.hash=function(){function h(){var i=e.center(),j=e.zoom(),k=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));i="#"+j.toFixed(2)+"/"+i.lat.toFixed(k)+"/"+
i.lon.toFixed(k);if(d!==i)location.replace(d=i)}function a(){if(location.hash!==d){var i=(d=location.hash).substring(1).split("/").map(Number);if(i.length<3||i.some(isNaN))h();else{var j=e.size();e.zoomBy(i[0]-e.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(c,Math.max(-c,i[1])),lon:i[2]})}}}var f={},d,c=89.99999999,e;f.map=function(i){if(!arguments.length)return e;e&&e.off("move",h);(e=i).on("move",h);window.addEventListener("hashchange",a,false);location.hash?a():h();return f};return f};r.interact=function(){var h=
{},a=r.drag(),f=r.wheel(),d=r.dblclick(),c=r.arrow();h.map=function(e){a.map(e);f.map(e);d.map(e);c.map(e);return h};return h};r.compass=function(){function h(x){q.setAttribute("class","compass active");y||(y=setInterval(function(){D&&Date.now()>B+H&&E.panBy(D)},G));D&&E.panBy(D);B=Date.now();j(x)}function a(){q.setAttribute("class","compass");if(y){clearInterval(y);y=0}}function f(x){return function(){x?this.setAttribute("class","active"):this.removeAttribute("class");D=x}}function d(x){return function(v){q.setAttribute("class",
"compass active");var z=E.zoom();E.zoom(x<0?Math.ceil(z)-1:Math.floor(z)+1);j(v)}}function c(x){return function(v){E.zoom(x);j(v)}}function e(){this.setAttribute("class","active")}function i(){this.removeAttribute("class")}function j(x){x.stopPropagation();x.preventDefault()}function k(x){var v=Math.SQRT1_2*o,z=o*0.7,A=o*0.2,F=r.svg("g"),I=F.appendChild(r.svg("path")),N=F.appendChild(r.svg("path"));I.setAttribute("class","direction");I.setAttribute("pointer-events","all");I.setAttribute("d","M0,0L"+
v+","+v+"A"+o+","+o+" 0 0,1 "+-v+","+v+"Z");N.setAttribute("class","chevron");N.setAttribute("d","M"+A+","+(z-A)+"L0,"+z+" "+-A+","+(z-A));N.setAttribute("pointer-events","none");F.addEventListener("mousedown",h,false);F.addEventListener("mouseover",f(x),false);F.addEventListener("mouseout",f(null),false);F.addEventListener("dblclick",j,false);return F}function s(x){var v=o*0.4,z=v/2,A=r.svg("g"),F=A.appendChild(r.svg("path")),I=A.appendChild(r.svg("path")),N=A.appendChild(r.svg("path")),M=A.appendChild(r.svg("path"));
F.setAttribute("class","back");F.setAttribute("d","M"+-v+",0V"+-v+"A"+v+","+v+" 0 1,1 "+v+","+-v+"V0Z");I.setAttribute("class","direction");I.setAttribute("d",F.getAttribute("d"));N.setAttribute("class","chevron");N.setAttribute("d","M"+-z+","+-v+"H"+z+(x>0?"M0,"+(-v-z)+"V"+-z:""));M.setAttribute("class","fore");M.setAttribute("fill","none");M.setAttribute("d",F.getAttribute("d"));A.addEventListener("mousedown",d(x),false);A.addEventListener("mouseover",e,false);A.addEventListener("mouseout",i,false);
A.addEventListener("dblclick",j,false);return A}function m(x){var v=o*0.2,z=o*0.4,A=r.svg("g"),F=A.appendChild(r.svg("rect")),I=A.appendChild(r.svg("path"));F.setAttribute("pointer-events","all");F.setAttribute("fill","none");F.setAttribute("x",-z);F.setAttribute("y",-0.75*z);F.setAttribute("width",2*z);F.setAttribute("height",1.5*z);I.setAttribute("class","chevron");I.setAttribute("d","M"+-v+",0H"+v);A.addEventListener("mousedown",c(x),false);A.addEventListener("dblclick",j,false);return A}function l(){if(q){var x=
o+6,v=x,z=E.size();switch(C){case "top-left":break;case "top-right":x=z.x-x;break;case "bottom-left":v=z.y-v;break;case "bottom-right":x=z.x-x;v=z.y-v;break}q.setAttribute("transform","translate("+x+","+v+")");for(var A in t)A==E.zoom()?t[A].setAttribute("class","active"):t[A].removeAttribute("class")}}var g={},q,t={},o=30,w=16,B=0,H=250,G=50,C="top-left",n="small",u="small",y,D,E;g.radius=function(x){if(!arguments.length)return o;o=x;return g};g.speed=function(x){if(!arguments.length)return o;w=
x;return g};g.position=function(x){if(!arguments.length)return C;C=x;return g};g.pan=function(x){if(!arguments.length)return u;u=x;return g};g.zoom=function(x){if(!arguments.length)return n;n=x;return g};g.map=function(x){if(!arguments.length)return E;E=x;E.on("move",l);E.on("resize",l);q=E.container().appendChild(r.svg("g"));q.setAttribute("class","compass");if(u!="none"){var v=q.appendChild(r.svg("g"));v.setAttribute("class","pan");var z=v.appendChild(r.svg("circle"));z.setAttribute("class","back");
z.setAttribute("r",o);v.appendChild(k({x:0,y:-w})).setAttribute("transform","rotate(0)");v.appendChild(k({x:w,y:0})).setAttribute("transform","rotate(90)");v.appendChild(k({x:0,y:w})).setAttribute("transform","rotate(180)");v.appendChild(k({x:-w,y:0})).setAttribute("transform","rotate(270)");v=v.appendChild(r.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",o);window.addEventListener("mouseup",a,false)}if(n!="none"){v=q.appendChild(r.svg("g"));v.setAttribute("class",
"zoom");z=-0.5;if(n=="big"){t={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(t[A]=v.appendChild(m(A))).setAttribute("transform","translate(0,"+-(z+0.75)*o*0.4+")")}A=u=="none"?0.4:2;v.setAttribute("transform","translate(0,"+o*(/^top-/.test(C)?A+(z+0.5)*0.4:-A)+")");v.appendChild(s(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*o*0.4+")");v.appendChild(s(-1)).setAttribute("transform","scale(-1)")}l();return g};return g};r.grid=function(){function h(){var c=d.firstChild,e=f.size(),
i=f.pointLocation(R);f.pointLocation(e);var j=Math.pow(2,4-Math.round(f.zoom()));i.lat=Math.floor(i.lat/j)*j;i.lon=Math.ceil(i.lon/j)*j;for(var k;(k=f.locationPoint(i).x)<=e.x;i.lon+=j){c||(c=d.appendChild(r.svg("line")));c.setAttribute("x1",k);c.setAttribute("x2",k);c.setAttribute("y1",0);c.setAttribute("y2",e.y);c=c.nextSibling}for(;(k=f.locationPoint(i).y)<=e.y;i.lat-=j){c||(c=d.appendChild(r.svg("line")));c.setAttribute("y1",k);c.setAttribute("y2",k);c.setAttribute("x1",0);c.setAttribute("x2",
e.x);c=c.nextSibling}for(;c;){e=c.nextSibling;d.removeChild(c);c=e}}var a={},f,d;a.map=function(c){if(!arguments.length)return f;f=c;f.on("move",h);f.on("resize",h);if(!d){d=r.svg("g");d.setAttribute("class","grid")}f.container().appendChild(d);h();return a};return a}})(org.polymaps);
